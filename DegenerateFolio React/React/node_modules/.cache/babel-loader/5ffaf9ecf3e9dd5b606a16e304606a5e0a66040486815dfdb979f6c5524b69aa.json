{"ast":null,"code":"import { Result } from \"../../helpers/result.js\";\nimport { APTOS_TOKEN } from \"../../helpers/const.js\";\nexport const CoinApi = {\n  /**\n   * Create right coin structured name -> 0xCoinHolderAddress::CoinPrefix::CoinSuffix, 0x1::TestCoin::TestCoin\n   * @param coinHolder\n   * @param moduleName\n   * @param structName\n   * @returns {string}\n   */\n  coinStruct(coinHolder, moduleName, structName) {\n    return `${this._0x(coinHolder)}::${moduleName}::${structName}`;\n  },\n  /**\n   * Initialization coin\n   * @param signer\n   * @param {String} coinStruct, to create it, use method coinStruct(...)\n   * @param coinName\n   * @param coinSymbol\n   * @param coinDec\n   * @returns {Promise<Result|undefined>}\n   */\n  async initCoin(signer, coinStruct, coinName, coinSymbol, coinDec = 0) {\n    const payload = {\n      type: \"script_function_payload\",\n      function: `0x1::ManagedCoin::initialize`,\n      type_arguments: [`${coinStruct}`],\n      arguments: [Buffer.from(coinName, \"utf-8\").toString(\"hex\"), Buffer.from(coinSymbol.toUpperCase(), \"utf-8\").toString(\"hex\"), coinDec.toString(), false]\n    };\n    return await this.submitTransaction(signer, payload);\n  },\n  async registerCoin(signer, coinStruct) {\n    const payload = {\n      \"type\": \"script_function_payload\",\n      \"function\": \"0x1::coin::register\",\n      \"type_arguments\": [`${coinStruct}`],\n      \"arguments\": []\n    };\n    return await this.submitTransaction(signer, payload);\n  },\n  async createCoin(signer, coinStruct, coinName, coinSymbol, coinDec = 0) {\n    const initialization = await this.initCoin(signer, coinStruct, coinName, coinSymbol, coinDec);\n    if (!initialization.ok) {\n      return new Result(false, \"Can't init coin!\", initialization.error);\n    }\n    if (!initialization.payload.success) {\n      return new Result(false, `Coin initialization error! ${initialization.payload.vm_status}`, initialization.payload);\n    }\n    const registration = await this.registerCoin(signer, coinStruct);\n    if (!registration.ok) {\n      return new Result(false, \"Can't register coin!\", initialization.error);\n    }\n    if (!registration.payload.success) {\n      return new Result(false, `Coin registration error! ${registration.payload.vm_status}`, registration.payload);\n    }\n    return new Result(true, {\n      initialization,\n      registration\n    });\n  },\n  async mintCoin(signer, receiver, coinStruct, amount) {\n    const payload = {\n      type: \"script_function_payload\",\n      function: `0x1::ManagedCoin::mint`,\n      type_arguments: [coinStruct],\n      arguments: [receiver, amount.toString()]\n    };\n    return await this.submitTransaction(signer, payload);\n  },\n  async sendCoins(signer, receiver, amount = 0, coin = APTOS_TOKEN) {\n    const payload = {\n      type: 'script_function_payload',\n      function: '0x1::coin::transfer',\n      type_arguments: [coin],\n      arguments: [this._0x(receiver), amount.toString()]\n    };\n    return await this.submitTransaction(signer, payload);\n  },\n  async getDepositedCoins(address, coinStruct) {\n    return await this.getEventsByHandle(this._0x(address), `0x1::coin::CoinStore<${coinStruct}>`, \"deposit_events\");\n  },\n  async getWithdrawCoins(address, coinStruct) {\n    return await this.getEventsByHandle(this._0x(address), `0x1::coin::CoinStore<${coinStruct}>`, \"withdraw_events\");\n  },\n  async delegateCoins() {}\n};","map":{"version":3,"names":["Result","APTOS_TOKEN","CoinApi","coinStruct","coinHolder","moduleName","structName","_0x","initCoin","signer","coinName","coinSymbol","coinDec","payload","type","function","type_arguments","arguments","Buffer","from","toString","toUpperCase","submitTransaction","registerCoin","createCoin","initialization","ok","error","success","vm_status","registration","mintCoin","receiver","amount","sendCoins","coin","getDepositedCoins","address","getEventsByHandle","getWithdrawCoins","delegateCoins"],"sources":["/home/ryoitsu/Documents/test/react-todo-app/node_modules/aptos-api-master/src/api/ext/coins.js"],"sourcesContent":["import {Result} from \"../../helpers/result.js\";\nimport {APTOS_TOKEN} from \"../../helpers/const.js\";\n\nexport const CoinApi = {\n    /**\n     * Create right coin structured name -> 0xCoinHolderAddress::CoinPrefix::CoinSuffix, 0x1::TestCoin::TestCoin\n     * @param coinHolder\n     * @param moduleName\n     * @param structName\n     * @returns {string}\n     */\n    coinStruct(coinHolder, moduleName, structName){\n        return `${this._0x(coinHolder)}::${moduleName}::${structName}`\n    },\n\n    /**\n     * Initialization coin\n     * @param signer\n     * @param {String} coinStruct, to create it, use method coinStruct(...)\n     * @param coinName\n     * @param coinSymbol\n     * @param coinDec\n     * @returns {Promise<Result|undefined>}\n     */\n    async initCoin(signer, coinStruct, coinName, coinSymbol, coinDec = 0){\n        const payload = {\n            type: \"script_function_payload\",\n            function: `0x1::ManagedCoin::initialize`,\n            type_arguments: [`${coinStruct}`],\n            arguments: [\n                Buffer.from(coinName, \"utf-8\").toString(\"hex\"),\n                Buffer.from(coinSymbol.toUpperCase(), \"utf-8\").toString(\"hex\"),\n                coinDec.toString(),\n                false,\n            ],\n        }\n\n        return await this.submitTransaction(signer, payload)\n    },\n\n    async registerCoin(signer, coinStruct){\n        const payload = {\n            \"type\": \"script_function_payload\",\n            \"function\": \"0x1::coin::register\",\n            \"type_arguments\": [`${coinStruct}`],\n            \"arguments\": []\n        }\n\n        return await this.submitTransaction(signer, payload)\n    },\n\n    async createCoin(signer, coinStruct, coinName, coinSymbol, coinDec = 0){\n        const initialization = await this.initCoin(signer, coinStruct, coinName, coinSymbol, coinDec)\n\n        if (!initialization.ok) {\n            return new Result(false, \"Can't init coin!\", initialization.error)\n        }\n\n        if (!initialization.payload.success) {\n            return new Result(false, `Coin initialization error! ${initialization.payload.vm_status}`, initialization.payload)\n        }\n\n        const registration = await this.registerCoin(signer, coinStruct)\n\n        if (!registration.ok) {\n            return new Result(false, \"Can't register coin!\", initialization.error)\n        }\n\n        if (!registration.payload.success) {\n            return new Result(false, `Coin registration error! ${registration.payload.vm_status}`, registration.payload)\n        }\n\n        return new Result(true, {initialization, registration})\n    },\n\n    async mintCoin(signer, receiver, coinStruct, amount){\n        const payload = {\n            type: \"script_function_payload\",\n            function: `0x1::ManagedCoin::mint`,\n            type_arguments: [coinStruct],\n            arguments: [\n                receiver,\n                amount.toString()\n            ],\n        }\n\n        return await this.submitTransaction(signer, payload)\n    },\n\n    async sendCoins(signer, receiver, amount = 0, coin = APTOS_TOKEN){\n        const payload = {\n            type: 'script_function_payload',\n            function: '0x1::coin::transfer',\n            type_arguments: [coin],\n            arguments: [this._0x(receiver), amount.toString()],\n        }\n        return await this.submitTransaction(signer, payload)\n    },\n\n    async getDepositedCoins(address, coinStruct){\n        return await this.getEventsByHandle(\n            this._0x(address),\n            `0x1::coin::CoinStore<${coinStruct}>`,\n            \"deposit_events\"\n        )\n    },\n\n    async getWithdrawCoins(address, coinStruct){\n        return await this.getEventsByHandle(\n            this._0x(address),\n            `0x1::coin::CoinStore<${coinStruct}>`,\n            \"withdraw_events\"\n        )\n    },\n\n    async delegateCoins(){},\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}