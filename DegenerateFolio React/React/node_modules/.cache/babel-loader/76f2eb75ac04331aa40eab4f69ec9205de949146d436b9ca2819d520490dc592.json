{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setupTxExtension = void 0;\nconst proto_signing_1 = require(\"@cosmjs/proto-signing\");\nconst signing_1 = require(\"cosmjs-types/cosmos/tx/signing/v1beta1/signing\");\nconst service_1 = require(\"cosmjs-types/cosmos/tx/v1beta1/service\");\nconst tx_1 = require(\"cosmjs-types/cosmos/tx/v1beta1/tx\");\nconst queryclient_1 = require(\"../../queryclient\");\nfunction setupTxExtension(base) {\n  // Use this service to get easy typed access to query methods\n  // This cannot be used for proof verification\n  const rpc = (0, queryclient_1.createProtobufRpcClient)(base);\n  const queryService = new service_1.ServiceClientImpl(rpc);\n  return {\n    tx: {\n      getTx: async txId => {\n        const request = {\n          hash: txId\n        };\n        const response = await queryService.GetTx(request);\n        return response;\n      },\n      simulate: async (messages, memo, signer, sequence) => {\n        const tx = tx_1.Tx.fromPartial({\n          authInfo: tx_1.AuthInfo.fromPartial({\n            fee: tx_1.Fee.fromPartial({}),\n            signerInfos: [{\n              publicKey: (0, proto_signing_1.encodePubkey)(signer),\n              sequence: BigInt(sequence),\n              modeInfo: {\n                single: {\n                  mode: signing_1.SignMode.SIGN_MODE_UNSPECIFIED\n                }\n              }\n            }]\n          }),\n          body: tx_1.TxBody.fromPartial({\n            messages: Array.from(messages),\n            memo: memo\n          }),\n          signatures: [new Uint8Array()]\n        });\n        const request = service_1.SimulateRequest.fromPartial({\n          txBytes: tx_1.Tx.encode(tx).finish()\n        });\n        const response = await queryService.Simulate(request);\n        return response;\n      }\n    }\n  };\n}\nexports.setupTxExtension = setupTxExtension;","map":{"version":3,"names":["proto_signing_1","require","signing_1","service_1","tx_1","queryclient_1","setupTxExtension","base","rpc","createProtobufRpcClient","queryService","ServiceClientImpl","tx","getTx","txId","request","hash","response","GetTx","simulate","messages","memo","signer","sequence","Tx","fromPartial","authInfo","AuthInfo","fee","Fee","signerInfos","publicKey","encodePubkey","BigInt","modeInfo","single","mode","SignMode","SIGN_MODE_UNSPECIFIED","body","TxBody","Array","from","signatures","Uint8Array","SimulateRequest","txBytes","encode","finish","Simulate","exports"],"sources":["../../../src/modules/tx/queries.ts"],"sourcesContent":[null],"mappings":";;;;;;AACA,MAAAA,eAAA,GAAAC,OAAA;AACA,MAAAC,SAAA,GAAAD,OAAA;AACA,MAAAE,SAAA,GAAAF,OAAA;AAOA,MAAAG,IAAA,GAAAH,OAAA;AAGA,MAAAI,aAAA,GAAAJ,OAAA;AAiBA,SAAgBK,gBAAgBA,CAACC,IAAiB;EAChD;EACA;EACA,MAAMC,GAAG,GAAG,IAAAH,aAAA,CAAAI,uBAAuB,EAACF,IAAI,CAAC;EACzC,MAAMG,YAAY,GAAG,IAAIP,SAAA,CAAAQ,iBAAiB,CAACH,GAAG,CAAC;EAE/C,OAAO;IACLI,EAAE,EAAE;MACFC,KAAK,EAAE,MAAOC,IAAY,IAAI;QAC5B,MAAMC,OAAO,GAAiB;UAC5BC,IAAI,EAAEF;SACP;QACD,MAAMG,QAAQ,GAAG,MAAMP,YAAY,CAACQ,KAAK,CAACH,OAAO,CAAC;QAClD,OAAOE,QAAQ;MACjB,CAAC;MACDE,QAAQ,EAAE,MAAAA,CACRC,QAAwB,EACxBC,IAAwB,EACxBC,MAAc,EACdC,QAAgB,KACd;QACF,MAAMX,EAAE,GAAGR,IAAA,CAAAoB,EAAE,CAACC,WAAW,CAAC;UACxBC,QAAQ,EAAEtB,IAAA,CAAAuB,QAAQ,CAACF,WAAW,CAAC;YAC7BG,GAAG,EAAExB,IAAA,CAAAyB,GAAG,CAACJ,WAAW,CAAC,EAAE,CAAC;YACxBK,WAAW,EAAE,CACX;cACEC,SAAS,EAAE,IAAA/B,eAAA,CAAAgC,YAAY,EAACV,MAAM,CAAC;cAC/BC,QAAQ,EAAEU,MAAM,CAACV,QAAQ,CAAC;cAC1BW,QAAQ,EAAE;gBAAEC,MAAM,EAAE;kBAAEC,IAAI,EAAElC,SAAA,CAAAmC,QAAQ,CAACC;gBAAqB;cAAE;aAC7D;WAEJ,CAAC;UACFC,IAAI,EAAEnC,IAAA,CAAAoC,MAAM,CAACf,WAAW,CAAC;YACvBL,QAAQ,EAAEqB,KAAK,CAACC,IAAI,CAACtB,QAAQ,CAAC;YAC9BC,IAAI,EAAEA;WACP,CAAC;UACFsB,UAAU,EAAE,CAAC,IAAIC,UAAU,EAAE;SAC9B,CAAC;QACF,MAAM7B,OAAO,GAAGZ,SAAA,CAAA0C,eAAe,CAACpB,WAAW,CAAC;UAC1CqB,OAAO,EAAE1C,IAAA,CAAAoB,EAAE,CAACuB,MAAM,CAACnC,EAAE,CAAC,CAACoC,MAAM;SAC9B,CAAC;QACF,MAAM/B,QAAQ,GAAG,MAAMP,YAAY,CAACuC,QAAQ,CAAClC,OAAO,CAAC;QACrD,OAAOE,QAAQ;MACjB;;GAEH;AACH;AA9CAiC,OAAA,CAAA5C,gBAAA,GAAAA,gBAAA","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}