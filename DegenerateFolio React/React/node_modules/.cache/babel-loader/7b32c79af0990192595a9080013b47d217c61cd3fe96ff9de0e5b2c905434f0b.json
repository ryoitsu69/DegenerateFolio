{"ast":null,"code":"import { combineLatest, map, of } from 'rxjs';\nimport { BN_ONE, BN_ZERO } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nexport function erasHistoric(instanceId, api) {\n  return memo(instanceId, withActive => combineLatest([api.query.staking.activeEra(), api.consts.staking.historyDepth ? of(api.consts.staking.historyDepth) : api.query.staking['historyDepth']()]).pipe(map(([activeEraOpt, historyDepth]) => {\n    const result = [];\n    const max = historyDepth.toNumber();\n    const activeEra = activeEraOpt.unwrapOrDefault().index;\n    let lastEra = activeEra;\n    while (lastEra.gte(BN_ZERO) && result.length < max) {\n      if (lastEra !== activeEra || withActive === true) {\n        result.push(api.registry.createType('EraIndex', lastEra));\n      }\n      lastEra = lastEra.sub(BN_ONE);\n    }\n    // go from oldest to newest\n    return result.reverse();\n  })));\n}","map":{"version":3,"names":["combineLatest","map","of","BN_ONE","BN_ZERO","memo","erasHistoric","instanceId","api","withActive","query","staking","activeEra","consts","historyDepth","pipe","activeEraOpt","result","max","toNumber","unwrapOrDefault","index","lastEra","gte","length","push","registry","createType","sub","reverse"],"sources":["/home/ryoitsu/Documents/test/react-todo-app/node_modules/@polkadot/api-derive/staking/erasHistoric.js"],"sourcesContent":["import { combineLatest, map, of } from 'rxjs';\nimport { BN_ONE, BN_ZERO } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nexport function erasHistoric(instanceId, api) {\n    return memo(instanceId, (withActive) => combineLatest([\n        api.query.staking.activeEra(),\n        api.consts.staking.historyDepth\n            ? of(api.consts.staking.historyDepth)\n            : api.query.staking['historyDepth']()\n    ]).pipe(map(([activeEraOpt, historyDepth]) => {\n        const result = [];\n        const max = historyDepth.toNumber();\n        const activeEra = activeEraOpt.unwrapOrDefault().index;\n        let lastEra = activeEra;\n        while (lastEra.gte(BN_ZERO) && (result.length < max)) {\n            if ((lastEra !== activeEra) || (withActive === true)) {\n                result.push(api.registry.createType('EraIndex', lastEra));\n            }\n            lastEra = lastEra.sub(BN_ONE);\n        }\n        // go from oldest to newest\n        return result.reverse();\n    })));\n}\n"],"mappings":"AAAA,SAASA,aAAa,EAAEC,GAAG,EAAEC,EAAE,QAAQ,MAAM;AAC7C,SAASC,MAAM,EAAEC,OAAO,QAAQ,gBAAgB;AAChD,SAASC,IAAI,QAAQ,kBAAkB;AACvC,OAAO,SAASC,YAAYA,CAACC,UAAU,EAAEC,GAAG,EAAE;EAC1C,OAAOH,IAAI,CAACE,UAAU,EAAGE,UAAU,IAAKT,aAAa,CAAC,CAClDQ,GAAG,CAACE,KAAK,CAACC,OAAO,CAACC,SAAS,CAAC,CAAC,EAC7BJ,GAAG,CAACK,MAAM,CAACF,OAAO,CAACG,YAAY,GACzBZ,EAAE,CAACM,GAAG,CAACK,MAAM,CAACF,OAAO,CAACG,YAAY,CAAC,GACnCN,GAAG,CAACE,KAAK,CAACC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,CAC5C,CAAC,CAACI,IAAI,CAACd,GAAG,CAAC,CAAC,CAACe,YAAY,EAAEF,YAAY,CAAC,KAAK;IAC1C,MAAMG,MAAM,GAAG,EAAE;IACjB,MAAMC,GAAG,GAAGJ,YAAY,CAACK,QAAQ,CAAC,CAAC;IACnC,MAAMP,SAAS,GAAGI,YAAY,CAACI,eAAe,CAAC,CAAC,CAACC,KAAK;IACtD,IAAIC,OAAO,GAAGV,SAAS;IACvB,OAAOU,OAAO,CAACC,GAAG,CAACnB,OAAO,CAAC,IAAKa,MAAM,CAACO,MAAM,GAAGN,GAAI,EAAE;MAClD,IAAKI,OAAO,KAAKV,SAAS,IAAMH,UAAU,KAAK,IAAK,EAAE;QAClDQ,MAAM,CAACQ,IAAI,CAACjB,GAAG,CAACkB,QAAQ,CAACC,UAAU,CAAC,UAAU,EAAEL,OAAO,CAAC,CAAC;MAC7D;MACAA,OAAO,GAAGA,OAAO,CAACM,GAAG,CAACzB,MAAM,CAAC;IACjC;IACA;IACA,OAAOc,MAAM,CAACY,OAAO,CAAC,CAAC;EAC3B,CAAC,CAAC,CAAC,CAAC;AACR","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}