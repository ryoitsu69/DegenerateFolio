{"ast":null,"code":"import { isNumber, isString, isUndefined, stringify } from '@polkadot/util';\nimport RpcError from './error.js';\nfunction formatErrorData(data) {\n  if (isUndefined(data)) {\n    return '';\n  }\n  const formatted = `: ${isString(data) ? data.replace(/Error\\(\"/g, '').replace(/\\(\"/g, '(').replace(/\"\\)/g, ')').replace(/\\(/g, ', ').replace(/\\)/g, '') : stringify(data)}`;\n  // We need some sort of cut-off here since these can be very large and\n  // very nested, pick a number and trim the result display to it\n  return formatted.length <= 256 ? formatted : `${formatted.substring(0, 255)}…`;\n}\nfunction checkError(error) {\n  if (error) {\n    const {\n      code,\n      data,\n      message\n    } = error;\n    throw new RpcError(`${code}: ${message}${formatErrorData(data)}`, code, data);\n  }\n}\n/** @internal */\nexport class RpcCoder {\n  __internal__id = 0;\n  decodeResponse(response) {\n    if (!response || response.jsonrpc !== '2.0') {\n      throw new Error('Invalid jsonrpc field in decoded object');\n    }\n    const isSubscription = !isUndefined(response.params) && !isUndefined(response.method);\n    if (!isNumber(response.id) && (!isSubscription || !isNumber(response.params.subscription) && !isString(response.params.subscription))) {\n      throw new Error('Invalid id field in decoded object');\n    }\n    checkError(response.error);\n    if (response.result === undefined && !isSubscription) {\n      throw new Error('No result found in jsonrpc response');\n    }\n    if (isSubscription) {\n      checkError(response.params.error);\n      return response.params.result;\n    }\n    return response.result;\n  }\n  encodeJson(method, params) {\n    const [id, data] = this.encodeObject(method, params);\n    return [id, stringify(data)];\n  }\n  encodeObject(method, params) {\n    const id = ++this.__internal__id;\n    return [id, {\n      id,\n      jsonrpc: '2.0',\n      method,\n      params\n    }];\n  }\n}","map":{"version":3,"names":["isNumber","isString","isUndefined","stringify","RpcError","formatErrorData","data","formatted","replace","length","substring","checkError","error","code","message","RpcCoder","__internal__id","decodeResponse","response","jsonrpc","Error","isSubscription","params","method","id","subscription","result","undefined","encodeJson","encodeObject"],"sources":["/home/ryoitsu/Documents/test/react-todo-app/node_modules/@polkadot/rpc-provider/coder/index.js"],"sourcesContent":["import { isNumber, isString, isUndefined, stringify } from '@polkadot/util';\nimport RpcError from './error.js';\nfunction formatErrorData(data) {\n    if (isUndefined(data)) {\n        return '';\n    }\n    const formatted = `: ${isString(data)\n        ? data.replace(/Error\\(\"/g, '').replace(/\\(\"/g, '(').replace(/\"\\)/g, ')').replace(/\\(/g, ', ').replace(/\\)/g, '')\n        : stringify(data)}`;\n    // We need some sort of cut-off here since these can be very large and\n    // very nested, pick a number and trim the result display to it\n    return formatted.length <= 256\n        ? formatted\n        : `${formatted.substring(0, 255)}…`;\n}\nfunction checkError(error) {\n    if (error) {\n        const { code, data, message } = error;\n        throw new RpcError(`${code}: ${message}${formatErrorData(data)}`, code, data);\n    }\n}\n/** @internal */\nexport class RpcCoder {\n    __internal__id = 0;\n    decodeResponse(response) {\n        if (!response || response.jsonrpc !== '2.0') {\n            throw new Error('Invalid jsonrpc field in decoded object');\n        }\n        const isSubscription = !isUndefined(response.params) && !isUndefined(response.method);\n        if (!isNumber(response.id) &&\n            (!isSubscription || (!isNumber(response.params.subscription) &&\n                !isString(response.params.subscription)))) {\n            throw new Error('Invalid id field in decoded object');\n        }\n        checkError(response.error);\n        if (response.result === undefined && !isSubscription) {\n            throw new Error('No result found in jsonrpc response');\n        }\n        if (isSubscription) {\n            checkError(response.params.error);\n            return response.params.result;\n        }\n        return response.result;\n    }\n    encodeJson(method, params) {\n        const [id, data] = this.encodeObject(method, params);\n        return [id, stringify(data)];\n    }\n    encodeObject(method, params) {\n        const id = ++this.__internal__id;\n        return [id, {\n                id,\n                jsonrpc: '2.0',\n                method,\n                params\n            }];\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}