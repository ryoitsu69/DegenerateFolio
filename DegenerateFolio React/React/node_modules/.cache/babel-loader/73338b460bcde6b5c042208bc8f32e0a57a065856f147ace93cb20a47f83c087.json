{"ast":null,"code":"import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { createSignedBlockExtended } from '../type/index.js';\nimport { memo } from '../util/index.js';\nimport { getAuthorDetails } from './util.js';\n/**\n * @name getBlock\n * @param {( Uint8Array | string )} hash - A block hash as U8 array or string.\n * @description Get a specific block (e.g. rpc.chain.getBlock) and extend it with the author\n * @example\n * <BR>\n *\n * ```javascript\n * const { author, block } = await api.derive.chain.getBlock('0x123...456');\n *\n * console.log(`block #${block.header.number} was authored by ${author}`);\n * ```\n */\nexport function getBlock(instanceId, api) {\n  return memo(instanceId, blockHash => combineLatest([api.rpc.chain.getBlock(blockHash), api.queryAt(blockHash)]).pipe(switchMap(_ref => {\n    let [signedBlock, queryAt] = _ref;\n    return combineLatest([of(signedBlock), queryAt.system.events(), getAuthorDetails(api, signedBlock.block.header, blockHash)]);\n  }), map(_ref2 => {\n    let [signedBlock, events, [, validators, author]] = _ref2;\n    return createSignedBlockExtended(events.registry, signedBlock, events, validators, author);\n  })));\n}","map":{"version":3,"names":["combineLatest","map","of","switchMap","createSignedBlockExtended","memo","getAuthorDetails","getBlock","instanceId","api","blockHash","rpc","chain","queryAt","pipe","_ref","signedBlock","system","events","block","header","_ref2","validators","author","registry"],"sources":["/home/ryoitsu/Documents/test/react-todo-app/node_modules/@polkadot/api-derive/chain/getBlock.js"],"sourcesContent":["import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { createSignedBlockExtended } from '../type/index.js';\nimport { memo } from '../util/index.js';\nimport { getAuthorDetails } from './util.js';\n/**\n * @name getBlock\n * @param {( Uint8Array | string )} hash - A block hash as U8 array or string.\n * @description Get a specific block (e.g. rpc.chain.getBlock) and extend it with the author\n * @example\n * <BR>\n *\n * ```javascript\n * const { author, block } = await api.derive.chain.getBlock('0x123...456');\n *\n * console.log(`block #${block.header.number} was authored by ${author}`);\n * ```\n */\nexport function getBlock(instanceId, api) {\n    return memo(instanceId, (blockHash) => combineLatest([\n        api.rpc.chain.getBlock(blockHash),\n        api.queryAt(blockHash)\n    ]).pipe(switchMap(([signedBlock, queryAt]) => combineLatest([\n        of(signedBlock),\n        queryAt.system.events(),\n        getAuthorDetails(api, signedBlock.block.header, blockHash)\n    ])), map(([signedBlock, events, [, validators, author]]) => createSignedBlockExtended(events.registry, signedBlock, events, validators, author))));\n}\n"],"mappings":"AAAA,SAASA,aAAa,EAAEC,GAAG,EAAEC,EAAE,EAAEC,SAAS,QAAQ,MAAM;AACxD,SAASC,yBAAyB,QAAQ,kBAAkB;AAC5D,SAASC,IAAI,QAAQ,kBAAkB;AACvC,SAASC,gBAAgB,QAAQ,WAAW;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,QAAQA,CAACC,UAAU,EAAEC,GAAG,EAAE;EACtC,OAAOJ,IAAI,CAACG,UAAU,EAAGE,SAAS,IAAKV,aAAa,CAAC,CACjDS,GAAG,CAACE,GAAG,CAACC,KAAK,CAACL,QAAQ,CAACG,SAAS,CAAC,EACjCD,GAAG,CAACI,OAAO,CAACH,SAAS,CAAC,CACzB,CAAC,CAACI,IAAI,CAACX,SAAS,CAACY,IAAA;IAAA,IAAC,CAACC,WAAW,EAAEH,OAAO,CAAC,GAAAE,IAAA;IAAA,OAAKf,aAAa,CAAC,CACxDE,EAAE,CAACc,WAAW,CAAC,EACfH,OAAO,CAACI,MAAM,CAACC,MAAM,CAAC,CAAC,EACvBZ,gBAAgB,CAACG,GAAG,EAAEO,WAAW,CAACG,KAAK,CAACC,MAAM,EAAEV,SAAS,CAAC,CAC7D,CAAC;EAAA,EAAC,EAAET,GAAG,CAACoB,KAAA;IAAA,IAAC,CAACL,WAAW,EAAEE,MAAM,EAAE,GAAGI,UAAU,EAAEC,MAAM,CAAC,CAAC,GAAAF,KAAA;IAAA,OAAKjB,yBAAyB,CAACc,MAAM,CAACM,QAAQ,EAAER,WAAW,EAAEE,MAAM,EAAEI,UAAU,EAAEC,MAAM,CAAC;EAAA,EAAC,CAAC,CAAC;AACtJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}