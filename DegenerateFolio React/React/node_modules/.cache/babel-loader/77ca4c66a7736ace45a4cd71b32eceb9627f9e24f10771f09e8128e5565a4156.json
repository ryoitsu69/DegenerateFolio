{"ast":null,"code":"import { flattenUniq } from './flattenUniq.js';\nimport { validateTypes } from './validateTypes.js';\n/** @internal */\nfunction extractTypes(lookup, types) {\n  return types.map(({\n    type\n  }) => lookup.getTypeDef(type).type);\n}\n/** @internal */\nfunction extractFieldTypes(lookup, type) {\n  return lookup.getSiType(type).def.asVariant.variants.map(({\n    fields\n  }) => extractTypes(lookup, fields));\n}\n/** @internal */\nfunction getPalletNames({\n  lookup,\n  pallets\n}) {\n  return pallets.reduce((all, {\n    calls,\n    constants,\n    events,\n    storage\n  }) => {\n    all.push([extractTypes(lookup, constants)]);\n    if (calls.isSome) {\n      all.push(extractFieldTypes(lookup, calls.unwrap().type));\n    }\n    if (events.isSome) {\n      all.push(extractFieldTypes(lookup, events.unwrap().type));\n    }\n    if (storage.isSome) {\n      all.push(storage.unwrap().items.map(({\n        type\n      }) => {\n        if (type.isPlain) {\n          return [lookup.getTypeDef(type.asPlain).type];\n        }\n        const {\n          hashers,\n          key,\n          value\n        } = type.asMap;\n        return hashers.length === 1 ? [lookup.getTypeDef(value).type, lookup.getTypeDef(key).type] : [lookup.getTypeDef(value).type, ...lookup.getSiType(key).def.asTuple.map(t => lookup.getTypeDef(t).type)];\n      }));\n    }\n    return all;\n  }, []);\n}\n/** @internal */\nexport function getUniqTypes(registry, meta, throwError) {\n  return validateTypes(registry, throwError, flattenUniq(getPalletNames(meta)));\n}","map":{"version":3,"names":["flattenUniq","validateTypes","extractTypes","lookup","types","map","type","getTypeDef","extractFieldTypes","getSiType","def","asVariant","variants","fields","getPalletNames","pallets","reduce","all","calls","constants","events","storage","push","isSome","unwrap","items","isPlain","asPlain","hashers","key","value","asMap","length","asTuple","t","getUniqTypes","registry","meta","throwError"],"sources":["/home/ryoitsu/Documents/test/react-todo-app/node_modules/@polkadot/types/metadata/util/getUniqTypes.js"],"sourcesContent":["import { flattenUniq } from './flattenUniq.js';\nimport { validateTypes } from './validateTypes.js';\n/** @internal */\nfunction extractTypes(lookup, types) {\n    return types.map(({ type }) => lookup.getTypeDef(type).type);\n}\n/** @internal */\nfunction extractFieldTypes(lookup, type) {\n    return lookup.getSiType(type).def.asVariant.variants.map(({ fields }) => extractTypes(lookup, fields));\n}\n/** @internal */\nfunction getPalletNames({ lookup, pallets }) {\n    return pallets.reduce((all, { calls, constants, events, storage }) => {\n        all.push([extractTypes(lookup, constants)]);\n        if (calls.isSome) {\n            all.push(extractFieldTypes(lookup, calls.unwrap().type));\n        }\n        if (events.isSome) {\n            all.push(extractFieldTypes(lookup, events.unwrap().type));\n        }\n        if (storage.isSome) {\n            all.push(storage.unwrap().items.map(({ type }) => {\n                if (type.isPlain) {\n                    return [lookup.getTypeDef(type.asPlain).type];\n                }\n                const { hashers, key, value } = type.asMap;\n                return hashers.length === 1\n                    ? [\n                        lookup.getTypeDef(value).type,\n                        lookup.getTypeDef(key).type\n                    ]\n                    : [\n                        lookup.getTypeDef(value).type,\n                        ...lookup.getSiType(key).def.asTuple.map((t) => lookup.getTypeDef(t).type)\n                    ];\n            }));\n        }\n        return all;\n    }, []);\n}\n/** @internal */\nexport function getUniqTypes(registry, meta, throwError) {\n    return validateTypes(registry, throwError, flattenUniq(getPalletNames(meta)));\n}\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,aAAa,QAAQ,oBAAoB;AAClD;AACA,SAASC,YAAYA,CAACC,MAAM,EAAEC,KAAK,EAAE;EACjC,OAAOA,KAAK,CAACC,GAAG,CAAC,CAAC;IAAEC;EAAK,CAAC,KAAKH,MAAM,CAACI,UAAU,CAACD,IAAI,CAAC,CAACA,IAAI,CAAC;AAChE;AACA;AACA,SAASE,iBAAiBA,CAACL,MAAM,EAAEG,IAAI,EAAE;EACrC,OAAOH,MAAM,CAACM,SAAS,CAACH,IAAI,CAAC,CAACI,GAAG,CAACC,SAAS,CAACC,QAAQ,CAACP,GAAG,CAAC,CAAC;IAAEQ;EAAO,CAAC,KAAKX,YAAY,CAACC,MAAM,EAAEU,MAAM,CAAC,CAAC;AAC1G;AACA;AACA,SAASC,cAAcA,CAAC;EAAEX,MAAM;EAAEY;AAAQ,CAAC,EAAE;EACzC,OAAOA,OAAO,CAACC,MAAM,CAAC,CAACC,GAAG,EAAE;IAAEC,KAAK;IAAEC,SAAS;IAAEC,MAAM;IAAEC;EAAQ,CAAC,KAAK;IAClEJ,GAAG,CAACK,IAAI,CAAC,CAACpB,YAAY,CAACC,MAAM,EAAEgB,SAAS,CAAC,CAAC,CAAC;IAC3C,IAAID,KAAK,CAACK,MAAM,EAAE;MACdN,GAAG,CAACK,IAAI,CAACd,iBAAiB,CAACL,MAAM,EAAEe,KAAK,CAACM,MAAM,CAAC,CAAC,CAAClB,IAAI,CAAC,CAAC;IAC5D;IACA,IAAIc,MAAM,CAACG,MAAM,EAAE;MACfN,GAAG,CAACK,IAAI,CAACd,iBAAiB,CAACL,MAAM,EAAEiB,MAAM,CAACI,MAAM,CAAC,CAAC,CAAClB,IAAI,CAAC,CAAC;IAC7D;IACA,IAAIe,OAAO,CAACE,MAAM,EAAE;MAChBN,GAAG,CAACK,IAAI,CAACD,OAAO,CAACG,MAAM,CAAC,CAAC,CAACC,KAAK,CAACpB,GAAG,CAAC,CAAC;QAAEC;MAAK,CAAC,KAAK;QAC9C,IAAIA,IAAI,CAACoB,OAAO,EAAE;UACd,OAAO,CAACvB,MAAM,CAACI,UAAU,CAACD,IAAI,CAACqB,OAAO,CAAC,CAACrB,IAAI,CAAC;QACjD;QACA,MAAM;UAAEsB,OAAO;UAAEC,GAAG;UAAEC;QAAM,CAAC,GAAGxB,IAAI,CAACyB,KAAK;QAC1C,OAAOH,OAAO,CAACI,MAAM,KAAK,CAAC,GACrB,CACE7B,MAAM,CAACI,UAAU,CAACuB,KAAK,CAAC,CAACxB,IAAI,EAC7BH,MAAM,CAACI,UAAU,CAACsB,GAAG,CAAC,CAACvB,IAAI,CAC9B,GACC,CACEH,MAAM,CAACI,UAAU,CAACuB,KAAK,CAAC,CAACxB,IAAI,EAC7B,GAAGH,MAAM,CAACM,SAAS,CAACoB,GAAG,CAAC,CAACnB,GAAG,CAACuB,OAAO,CAAC5B,GAAG,CAAE6B,CAAC,IAAK/B,MAAM,CAACI,UAAU,CAAC2B,CAAC,CAAC,CAAC5B,IAAI,CAAC,CAC7E;MACT,CAAC,CAAC,CAAC;IACP;IACA,OAAOW,GAAG;EACd,CAAC,EAAE,EAAE,CAAC;AACV;AACA;AACA,OAAO,SAASkB,YAAYA,CAACC,QAAQ,EAAEC,IAAI,EAAEC,UAAU,EAAE;EACrD,OAAOrC,aAAa,CAACmC,QAAQ,EAAEE,UAAU,EAAEtC,WAAW,CAACc,cAAc,CAACuB,IAAI,CAAC,CAAC,CAAC;AACjF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}