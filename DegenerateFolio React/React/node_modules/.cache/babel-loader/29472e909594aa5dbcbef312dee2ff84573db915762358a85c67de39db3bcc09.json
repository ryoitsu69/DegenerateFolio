{"ast":null,"code":"import _defineProperty from \"/home/ryoitsu/Documents/test/react-todo-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { isFunction, noop } from '@polkadot/util';\nexport class Combinator {\n  constructor(fns, callback) {\n    _defineProperty(this, \"__internal__allHasFired\", false);\n    _defineProperty(this, \"__internal__callback\", void 0);\n    _defineProperty(this, \"__internal__fired\", []);\n    _defineProperty(this, \"__internal__fns\", []);\n    _defineProperty(this, \"__internal__isActive\", true);\n    _defineProperty(this, \"__internal__results\", []);\n    _defineProperty(this, \"__internal__subscriptions\", []);\n    this.__internal__callback = callback;\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises, @typescript-eslint/require-await\n    this.__internal__subscriptions = fns.map(async (input, index) => {\n      const [fn, ...args] = Array.isArray(input) ? input : [input];\n      this.__internal__fired.push(false);\n      this.__internal__fns.push(fn);\n      // Not quite 100% how to have a variable number at the front here\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return,@typescript-eslint/ban-types\n      return fn(...args, this._createCallback(index));\n    });\n  }\n  _allHasFired() {\n    this.__internal__allHasFired || (this.__internal__allHasFired = this.__internal__fired.filter(hasFired => !hasFired).length === 0);\n    return this.__internal__allHasFired;\n  }\n  _createCallback(index) {\n    return value => {\n      this.__internal__fired[index] = true;\n      this.__internal__results[index] = value;\n      this._triggerUpdate();\n    };\n  }\n  _triggerUpdate() {\n    if (!this.__internal__isActive || !isFunction(this.__internal__callback) || !this._allHasFired()) {\n      return;\n    }\n    try {\n      Promise.resolve(this.__internal__callback(this.__internal__results)).catch(noop);\n    } catch {\n      // swallow, we don't want the handler to trip us up\n    }\n  }\n  unsubscribe() {\n    if (!this.__internal__isActive) {\n      return;\n    }\n    this.__internal__isActive = false;\n    Promise.all(this.__internal__subscriptions.map(async subscription => {\n      try {\n        const unsubscribe = await subscription;\n        if (isFunction(unsubscribe)) {\n          unsubscribe();\n        }\n      } catch {\n        // ignore\n      }\n    })).catch(() => {\n      // ignore, already ignored above, should never throw\n    });\n  }\n}","map":{"version":3,"names":["isFunction","noop","Combinator","constructor","fns","callback","_defineProperty","__internal__callback","__internal__subscriptions","map","input","index","fn","args","Array","isArray","__internal__fired","push","__internal__fns","_createCallback","_allHasFired","__internal__allHasFired","filter","hasFired","length","value","__internal__results","_triggerUpdate","__internal__isActive","Promise","resolve","catch","unsubscribe","all","subscription"],"sources":["/home/ryoitsu/Documents/test/react-todo-app/node_modules/@polkadot/api/promise/Combinator.js"],"sourcesContent":["import { isFunction, noop } from '@polkadot/util';\nexport class Combinator {\n    __internal__allHasFired = false;\n    __internal__callback;\n    __internal__fired = [];\n    __internal__fns = [];\n    __internal__isActive = true;\n    __internal__results = [];\n    __internal__subscriptions = [];\n    constructor(fns, callback) {\n        this.__internal__callback = callback;\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises, @typescript-eslint/require-await\n        this.__internal__subscriptions = fns.map(async (input, index) => {\n            const [fn, ...args] = Array.isArray(input)\n                ? input\n                : [input];\n            this.__internal__fired.push(false);\n            this.__internal__fns.push(fn);\n            // Not quite 100% how to have a variable number at the front here\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return,@typescript-eslint/ban-types\n            return fn(...args, this._createCallback(index));\n        });\n    }\n    _allHasFired() {\n        this.__internal__allHasFired ||= this.__internal__fired.filter((hasFired) => !hasFired).length === 0;\n        return this.__internal__allHasFired;\n    }\n    _createCallback(index) {\n        return (value) => {\n            this.__internal__fired[index] = true;\n            this.__internal__results[index] = value;\n            this._triggerUpdate();\n        };\n    }\n    _triggerUpdate() {\n        if (!this.__internal__isActive || !isFunction(this.__internal__callback) || !this._allHasFired()) {\n            return;\n        }\n        try {\n            Promise\n                .resolve(this.__internal__callback(this.__internal__results))\n                .catch(noop);\n        }\n        catch {\n            // swallow, we don't want the handler to trip us up\n        }\n    }\n    unsubscribe() {\n        if (!this.__internal__isActive) {\n            return;\n        }\n        this.__internal__isActive = false;\n        Promise\n            .all(this.__internal__subscriptions.map(async (subscription) => {\n            try {\n                const unsubscribe = await subscription;\n                if (isFunction(unsubscribe)) {\n                    unsubscribe();\n                }\n            }\n            catch {\n                // ignore\n            }\n        })).catch(() => {\n            // ignore, already ignored above, should never throw\n        });\n    }\n}\n"],"mappings":";AAAA,SAASA,UAAU,EAAEC,IAAI,QAAQ,gBAAgB;AACjD,OAAO,MAAMC,UAAU,CAAC;EAQpBC,WAAWA,CAACC,GAAG,EAAEC,QAAQ,EAAE;IAAAC,eAAA,kCAPD,KAAK;IAAAA,eAAA;IAAAA,eAAA,4BAEX,EAAE;IAAAA,eAAA,0BACJ,EAAE;IAAAA,eAAA,+BACG,IAAI;IAAAA,eAAA,8BACL,EAAE;IAAAA,eAAA,oCACI,EAAE;IAE1B,IAAI,CAACC,oBAAoB,GAAGF,QAAQ;IACpC;IACA,IAAI,CAACG,yBAAyB,GAAGJ,GAAG,CAACK,GAAG,CAAC,OAAOC,KAAK,EAAEC,KAAK,KAAK;MAC7D,MAAM,CAACC,EAAE,EAAE,GAAGC,IAAI,CAAC,GAAGC,KAAK,CAACC,OAAO,CAACL,KAAK,CAAC,GACpCA,KAAK,GACL,CAACA,KAAK,CAAC;MACb,IAAI,CAACM,iBAAiB,CAACC,IAAI,CAAC,KAAK,CAAC;MAClC,IAAI,CAACC,eAAe,CAACD,IAAI,CAACL,EAAE,CAAC;MAC7B;MACA;MACA,OAAOA,EAAE,CAAC,GAAGC,IAAI,EAAE,IAAI,CAACM,eAAe,CAACR,KAAK,CAAC,CAAC;IACnD,CAAC,CAAC;EACN;EACAS,YAAYA,CAAA,EAAG;IACX,IAAI,CAACC,uBAAuB,KAA5B,IAAI,CAACA,uBAAuB,GAAK,IAAI,CAACL,iBAAiB,CAACM,MAAM,CAAEC,QAAQ,IAAK,CAACA,QAAQ,CAAC,CAACC,MAAM,KAAK,CAAC;IACpG,OAAO,IAAI,CAACH,uBAAuB;EACvC;EACAF,eAAeA,CAACR,KAAK,EAAE;IACnB,OAAQc,KAAK,IAAK;MACd,IAAI,CAACT,iBAAiB,CAACL,KAAK,CAAC,GAAG,IAAI;MACpC,IAAI,CAACe,mBAAmB,CAACf,KAAK,CAAC,GAAGc,KAAK;MACvC,IAAI,CAACE,cAAc,CAAC,CAAC;IACzB,CAAC;EACL;EACAA,cAAcA,CAAA,EAAG;IACb,IAAI,CAAC,IAAI,CAACC,oBAAoB,IAAI,CAAC5B,UAAU,CAAC,IAAI,CAACO,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAACa,YAAY,CAAC,CAAC,EAAE;MAC9F;IACJ;IACA,IAAI;MACAS,OAAO,CACFC,OAAO,CAAC,IAAI,CAACvB,oBAAoB,CAAC,IAAI,CAACmB,mBAAmB,CAAC,CAAC,CAC5DK,KAAK,CAAC9B,IAAI,CAAC;IACpB,CAAC,CACD,MAAM;MACF;IAAA;EAER;EACA+B,WAAWA,CAAA,EAAG;IACV,IAAI,CAAC,IAAI,CAACJ,oBAAoB,EAAE;MAC5B;IACJ;IACA,IAAI,CAACA,oBAAoB,GAAG,KAAK;IACjCC,OAAO,CACFI,GAAG,CAAC,IAAI,CAACzB,yBAAyB,CAACC,GAAG,CAAC,MAAOyB,YAAY,IAAK;MAChE,IAAI;QACA,MAAMF,WAAW,GAAG,MAAME,YAAY;QACtC,IAAIlC,UAAU,CAACgC,WAAW,CAAC,EAAE;UACzBA,WAAW,CAAC,CAAC;QACjB;MACJ,CAAC,CACD,MAAM;QACF;MAAA;IAER,CAAC,CAAC,CAAC,CAACD,KAAK,CAAC,MAAM;MACZ;IAAA,CACH,CAAC;EACN;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}