{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createGovAminoConverters = exports.isAminoMsgDeposit = exports.isAminoMsgVoteWeighted = exports.isAminoMsgVote = exports.isAminoMsgSubmitProposal = void 0;\nconst math_1 = require(\"@cosmjs/math\");\nconst utils_1 = require(\"@cosmjs/utils\");\nconst gov_1 = require(\"cosmjs-types/cosmos/gov/v1beta1/gov\");\nconst any_1 = require(\"cosmjs-types/google/protobuf/any\");\nconst queryclient_1 = require(\"../../queryclient\");\nfunction isAminoMsgSubmitProposal(msg) {\n  return msg.type === \"cosmos-sdk/MsgSubmitProposal\";\n}\nexports.isAminoMsgSubmitProposal = isAminoMsgSubmitProposal;\nfunction isAminoMsgVote(msg) {\n  return msg.type === \"cosmos-sdk/MsgVote\";\n}\nexports.isAminoMsgVote = isAminoMsgVote;\nfunction isAminoMsgVoteWeighted(msg) {\n  return msg.type === \"cosmos-sdk/MsgVoteWeighted\";\n}\nexports.isAminoMsgVoteWeighted = isAminoMsgVoteWeighted;\nfunction isAminoMsgDeposit(msg) {\n  return msg.type === \"cosmos-sdk/MsgDeposit\";\n}\nexports.isAminoMsgDeposit = isAminoMsgDeposit;\nfunction createGovAminoConverters() {\n  // Gov v1 types missing, see\n  // https://github.com/cosmos/cosmjs/issues/1442\n  return {\n    \"/cosmos.gov.v1beta1.MsgDeposit\": {\n      aminoType: \"cosmos-sdk/MsgDeposit\",\n      toAmino: ({\n        amount,\n        depositor,\n        proposalId\n      }) => {\n        return {\n          amount,\n          depositor,\n          proposal_id: proposalId.toString()\n        };\n      },\n      fromAmino: ({\n        amount,\n        depositor,\n        proposal_id\n      }) => {\n        return {\n          amount: Array.from(amount),\n          depositor,\n          proposalId: BigInt(proposal_id)\n        };\n      }\n    },\n    \"/cosmos.gov.v1beta1.MsgVote\": {\n      aminoType: \"cosmos-sdk/MsgVote\",\n      toAmino: ({\n        option,\n        proposalId,\n        voter\n      }) => {\n        return {\n          option: option,\n          proposal_id: proposalId.toString(),\n          voter: voter\n        };\n      },\n      fromAmino: ({\n        option,\n        proposal_id,\n        voter\n      }) => {\n        return {\n          option: (0, gov_1.voteOptionFromJSON)(option),\n          proposalId: BigInt(proposal_id),\n          voter: voter\n        };\n      }\n    },\n    \"/cosmos.gov.v1beta1.MsgVoteWeighted\": {\n      aminoType: \"cosmos-sdk/MsgVoteWeighted\",\n      toAmino: ({\n        options,\n        proposalId,\n        voter\n      }) => {\n        return {\n          options: options.map(o => ({\n            option: o.option,\n            // Weight is between 0 and 1, so we always have 20 characters when printing all trailing\n            // zeros (e.g. \"0.700000000000000000\" or \"1.000000000000000000\")\n            weight: (0, queryclient_1.decodeCosmosSdkDecFromProto)(o.weight).toString().padEnd(20, \"0\")\n          })),\n          proposal_id: proposalId.toString(),\n          voter: voter\n        };\n      },\n      fromAmino: ({\n        options,\n        proposal_id,\n        voter\n      }) => {\n        return {\n          proposalId: BigInt(proposal_id),\n          voter: voter,\n          options: options.map(o => ({\n            option: (0, gov_1.voteOptionFromJSON)(o.option),\n            weight: math_1.Decimal.fromUserInput(o.weight, 18).atomics\n          }))\n        };\n      }\n    },\n    \"/cosmos.gov.v1beta1.MsgSubmitProposal\": {\n      aminoType: \"cosmos-sdk/MsgSubmitProposal\",\n      toAmino: ({\n        initialDeposit,\n        proposer,\n        content\n      }) => {\n        (0, utils_1.assertDefinedAndNotNull)(content);\n        let proposal;\n        switch (content.typeUrl) {\n          case \"/cosmos.gov.v1beta1.TextProposal\":\n            {\n              const textProposal = gov_1.TextProposal.decode(content.value);\n              proposal = {\n                type: \"cosmos-sdk/TextProposal\",\n                value: {\n                  description: textProposal.description,\n                  title: textProposal.title\n                }\n              };\n              break;\n            }\n          default:\n            throw new Error(`Unsupported proposal type: '${content.typeUrl}'`);\n        }\n        return {\n          initial_deposit: initialDeposit,\n          proposer: proposer,\n          content: proposal\n        };\n      },\n      fromAmino: ({\n        initial_deposit,\n        proposer,\n        content\n      }) => {\n        let any_content;\n        switch (content.type) {\n          case \"cosmos-sdk/TextProposal\":\n            {\n              const {\n                value\n              } = content;\n              (0, utils_1.assert)((0, utils_1.isNonNullObject)(value));\n              const {\n                title,\n                description\n              } = value;\n              (0, utils_1.assert)(typeof title === \"string\");\n              (0, utils_1.assert)(typeof description === \"string\");\n              any_content = any_1.Any.fromPartial({\n                typeUrl: \"/cosmos.gov.v1beta1.TextProposal\",\n                value: gov_1.TextProposal.encode(gov_1.TextProposal.fromPartial({\n                  title: title,\n                  description: description\n                })).finish()\n              });\n              break;\n            }\n          default:\n            throw new Error(`Unsupported proposal type: '${content.type}'`);\n        }\n        return {\n          initialDeposit: Array.from(initial_deposit),\n          proposer: proposer,\n          content: any_content\n        };\n      }\n    }\n  };\n}\nexports.createGovAminoConverters = createGovAminoConverters;","map":{"version":3,"names":["math_1","require","utils_1","gov_1","any_1","queryclient_1","isAminoMsgSubmitProposal","msg","type","exports","isAminoMsgVote","isAminoMsgVoteWeighted","isAminoMsgDeposit","createGovAminoConverters","aminoType","toAmino","amount","depositor","proposalId","proposal_id","toString","fromAmino","Array","from","BigInt","option","voter","voteOptionFromJSON","options","map","o","weight","decodeCosmosSdkDecFromProto","padEnd","Decimal","fromUserInput","atomics","initialDeposit","proposer","content","assertDefinedAndNotNull","proposal","typeUrl","textProposal","TextProposal","decode","value","description","title","Error","initial_deposit","any_content","assert","isNonNullObject","Any","fromPartial","encode","finish"],"sources":["../../../src/modules/gov/aminomessages.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}