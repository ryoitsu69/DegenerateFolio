{"ast":null,"code":"import { asapScheduler, Observable, Subscription } from 'rxjs';\n/** @internal */\nexport function refCountDelay() {\n  let delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1750;\n  return source => {\n    // state: 0 = disconnected, 1 = disconnecting, 2 = connecting, 3 = connected\n    let [state, refCount, connection, scheduler] = [0, 0, Subscription.EMPTY, Subscription.EMPTY];\n    return new Observable(ob => {\n      source.subscribe(ob);\n      if (refCount++ === 0) {\n        if (state === 1) {\n          scheduler.unsubscribe();\n        } else {\n          // eslint-disable-next-line deprecation/deprecation\n          connection = source.connect();\n        }\n        state = 3;\n      }\n      return () => {\n        if (--refCount === 0) {\n          if (state === 2) {\n            state = 0;\n            scheduler.unsubscribe();\n          } else {\n            // state === 3\n            state = 1;\n            scheduler = asapScheduler.schedule(() => {\n              state = 0;\n              connection.unsubscribe();\n            }, delay);\n          }\n        }\n      };\n    });\n  };\n}","map":{"version":3,"names":["asapScheduler","Observable","Subscription","refCountDelay","delay","arguments","length","undefined","source","state","refCount","connection","scheduler","EMPTY","ob","subscribe","unsubscribe","connect","schedule"],"sources":["/home/ryoitsu/Documents/test/react-todo-app/node_modules/@polkadot/rpc-core/util/refCountDelay.js"],"sourcesContent":["import { asapScheduler, Observable, Subscription } from 'rxjs';\n/** @internal */\nexport function refCountDelay(delay = 1750) {\n    return (source) => {\n        // state: 0 = disconnected, 1 = disconnecting, 2 = connecting, 3 = connected\n        let [state, refCount, connection, scheduler] = [0, 0, Subscription.EMPTY, Subscription.EMPTY];\n        return new Observable((ob) => {\n            source.subscribe(ob);\n            if (refCount++ === 0) {\n                if (state === 1) {\n                    scheduler.unsubscribe();\n                }\n                else {\n                    // eslint-disable-next-line deprecation/deprecation\n                    connection = source.connect();\n                }\n                state = 3;\n            }\n            return () => {\n                if (--refCount === 0) {\n                    if (state === 2) {\n                        state = 0;\n                        scheduler.unsubscribe();\n                    }\n                    else {\n                        // state === 3\n                        state = 1;\n                        scheduler = asapScheduler.schedule(() => {\n                            state = 0;\n                            connection.unsubscribe();\n                        }, delay);\n                    }\n                }\n            };\n        });\n    };\n}\n"],"mappings":"AAAA,SAASA,aAAa,EAAEC,UAAU,EAAEC,YAAY,QAAQ,MAAM;AAC9D;AACA,OAAO,SAASC,aAAaA,CAAA,EAAe;EAAA,IAAdC,KAAK,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;EACtC,OAAQG,MAAM,IAAK;IACf;IACA,IAAI,CAACC,KAAK,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,SAAS,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAEV,YAAY,CAACW,KAAK,EAAEX,YAAY,CAACW,KAAK,CAAC;IAC7F,OAAO,IAAIZ,UAAU,CAAEa,EAAE,IAAK;MAC1BN,MAAM,CAACO,SAAS,CAACD,EAAE,CAAC;MACpB,IAAIJ,QAAQ,EAAE,KAAK,CAAC,EAAE;QAClB,IAAID,KAAK,KAAK,CAAC,EAAE;UACbG,SAAS,CAACI,WAAW,CAAC,CAAC;QAC3B,CAAC,MACI;UACD;UACAL,UAAU,GAAGH,MAAM,CAACS,OAAO,CAAC,CAAC;QACjC;QACAR,KAAK,GAAG,CAAC;MACb;MACA,OAAO,MAAM;QACT,IAAI,EAAEC,QAAQ,KAAK,CAAC,EAAE;UAClB,IAAID,KAAK,KAAK,CAAC,EAAE;YACbA,KAAK,GAAG,CAAC;YACTG,SAAS,CAACI,WAAW,CAAC,CAAC;UAC3B,CAAC,MACI;YACD;YACAP,KAAK,GAAG,CAAC;YACTG,SAAS,GAAGZ,aAAa,CAACkB,QAAQ,CAAC,MAAM;cACrCT,KAAK,GAAG,CAAC;cACTE,UAAU,CAACK,WAAW,CAAC,CAAC;YAC5B,CAAC,EAAEZ,KAAK,CAAC;UACb;QACJ;MACJ,CAAC;IACL,CAAC,CAAC;EACN,CAAC;AACL","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}