{"ast":null,"code":"\"use strict\";\n\nconst bitmapFontXMLParser = {\n  test(data) {\n    const xml = data;\n    return typeof xml !== \"string\" && \"getElementsByTagName\" in xml && xml.getElementsByTagName(\"page\").length && xml.getElementsByTagName(\"info\")[0].getAttribute(\"face\") !== null;\n  },\n  parse(xml) {\n    const data = {\n      chars: {},\n      pages: [],\n      lineHeight: 0,\n      fontSize: 0,\n      fontFamily: \"\",\n      distanceField: null,\n      baseLineOffset: 0\n    };\n    const info = xml.getElementsByTagName(\"info\")[0];\n    const common = xml.getElementsByTagName(\"common\")[0];\n    const distanceField = xml.getElementsByTagName(\"distanceField\")[0];\n    if (distanceField) {\n      data.distanceField = {\n        type: distanceField.getAttribute(\"fieldType\"),\n        range: parseInt(distanceField.getAttribute(\"distanceRange\"), 10)\n      };\n    }\n    const page = xml.getElementsByTagName(\"page\");\n    const char = xml.getElementsByTagName(\"char\");\n    const kerning = xml.getElementsByTagName(\"kerning\");\n    data.fontSize = parseInt(info.getAttribute(\"size\"), 10);\n    data.fontFamily = info.getAttribute(\"face\");\n    data.lineHeight = parseInt(common.getAttribute(\"lineHeight\"), 10);\n    for (let i = 0; i < page.length; i++) {\n      data.pages.push({\n        id: parseInt(page[i].getAttribute(\"id\"), 10) || 0,\n        file: page[i].getAttribute(\"file\")\n      });\n    }\n    const map = {};\n    data.baseLineOffset = data.lineHeight - parseInt(common.getAttribute(\"base\"), 10);\n    for (let i = 0; i < char.length; i++) {\n      const charNode = char[i];\n      const id = parseInt(charNode.getAttribute(\"id\"), 10);\n      let letter = charNode.getAttribute(\"letter\") ?? charNode.getAttribute(\"char\") ?? String.fromCharCode(id);\n      if (letter === \"space\") letter = \" \";\n      map[id] = letter;\n      data.chars[letter] = {\n        id,\n        // texture deets..\n        page: parseInt(charNode.getAttribute(\"page\"), 10) || 0,\n        x: parseInt(charNode.getAttribute(\"x\"), 10),\n        y: parseInt(charNode.getAttribute(\"y\"), 10),\n        width: parseInt(charNode.getAttribute(\"width\"), 10),\n        height: parseInt(charNode.getAttribute(\"height\"), 10),\n        // render deets..\n        xOffset: parseInt(charNode.getAttribute(\"xoffset\"), 10),\n        yOffset: parseInt(charNode.getAttribute(\"yoffset\"), 10),\n        // + baseLineOffset,\n        xAdvance: parseInt(charNode.getAttribute(\"xadvance\"), 10),\n        kerning: {}\n      };\n    }\n    for (let i = 0; i < kerning.length; i++) {\n      const first = parseInt(kerning[i].getAttribute(\"first\"), 10);\n      const second = parseInt(kerning[i].getAttribute(\"second\"), 10);\n      const amount = parseInt(kerning[i].getAttribute(\"amount\"), 10);\n      data.chars[map[second]].kerning[map[first]] = amount;\n    }\n    return data;\n  }\n};\nexport { bitmapFontXMLParser };","map":{"version":3,"names":["bitmapFontXMLParser","test","data","xml","getElementsByTagName","length","getAttribute","parse","chars","pages","lineHeight","fontSize","fontFamily","distanceField","baseLineOffset","info","common","type","range","parseInt","page","char","kerning","i","push","id","file","map","charNode","letter","String","fromCharCode","x","y","width","height","xOffset","yOffset","xAdvance","first","second","amount"],"sources":["/home/ryoitsu/node_modules/pixi.js/src/scene/text-bitmap/asset/bitmapFontXMLParser.ts"],"sourcesContent":["import type { BitmapFontData, RawCharData } from '../AbstractBitmapFont';\n\nexport const bitmapFontXMLParser = {\n    test(data: string | XMLDocument | BitmapFontData): boolean\n    {\n        const xml = data as Document;\n\n        return typeof xml !== 'string'\n            && 'getElementsByTagName' in xml\n            && xml.getElementsByTagName('page').length\n            && xml.getElementsByTagName('info')[0].getAttribute('face') !== null;\n    },\n\n    parse(xml: Document): BitmapFontData\n    {\n        const data: BitmapFontData = {\n            chars: {},\n            pages: [],\n            lineHeight: 0,\n            fontSize: 0,\n            fontFamily: '',\n            distanceField: null,\n            baseLineOffset: 0,\n        };\n\n        const info = xml.getElementsByTagName('info')[0];\n        const common = xml.getElementsByTagName('common')[0];\n        const distanceField = xml.getElementsByTagName('distanceField')[0];\n\n        if (distanceField)\n        {\n            data.distanceField = {\n                type: distanceField.getAttribute('fieldType') as 'sdf' | 'msdf' | 'none',\n                range: parseInt(distanceField.getAttribute('distanceRange'), 10),\n            };\n        }\n\n        // pages and chars:\n        const page = xml.getElementsByTagName('page');\n        const char = xml.getElementsByTagName('char');\n        const kerning = xml.getElementsByTagName('kerning');\n\n        data.fontSize = parseInt(info.getAttribute('size'), 10);\n        data.fontFamily = info.getAttribute('face');\n        data.lineHeight = parseInt(common.getAttribute('lineHeight'), 10);\n\n        for (let i = 0; i < page.length; i++)\n        {\n            data.pages.push({\n                id: parseInt(page[i].getAttribute('id'), 10) || 0,\n                file: page[i].getAttribute('file'),\n            });\n        }\n\n        const map: Record<string, string> = {};\n\n        data.baseLineOffset = data.lineHeight - parseInt(common.getAttribute('base'), 10);\n\n        for (let i = 0; i < char.length; i++)\n        {\n            const charNode = char[i];\n            const id = parseInt(charNode.getAttribute('id'), 10);\n\n            let letter = charNode.getAttribute('letter') ?? charNode.getAttribute('char') ?? String.fromCharCode(id);\n\n            if (letter === 'space')letter = ' ';\n\n            map[id] = letter;\n\n            data.chars[letter] = {\n                id,\n                // texture deets..\n                page: parseInt(charNode.getAttribute('page'), 10) || 0,\n                x: parseInt(charNode.getAttribute('x'), 10),\n                y: parseInt(charNode.getAttribute('y'), 10),\n                width: parseInt(charNode.getAttribute('width'), 10),\n                height: parseInt(charNode.getAttribute('height'), 10),\n\n                // render deets..\n                xOffset: parseInt(charNode.getAttribute('xoffset'), 10),\n                yOffset: parseInt(charNode.getAttribute('yoffset'), 10), // + baseLineOffset,\n                xAdvance: parseInt(charNode.getAttribute('xadvance'), 10),\n                kerning: {},\n            } as RawCharData;\n        }\n\n        for (let i = 0; i < kerning.length; i++)\n        {\n            const first = parseInt(kerning[i].getAttribute('first'), 10);\n            const second = parseInt(kerning[i].getAttribute('second'), 10);\n            const amount = parseInt(kerning[i].getAttribute('amount'), 10);\n\n            data.chars[map[second]].kerning[map[first]] = amount;// * 10000;\n        }\n\n        return data;\n    }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}