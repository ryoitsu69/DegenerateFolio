{"ast":null,"code":"import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { firstMemo, memo } from '../util/index.js';\nfunction extractsIds(stashId, queuedKeys, nextKeys) {\n  const sessionIds = (queuedKeys.find(([currentId]) => currentId.eq(stashId)) || [undefined, []])[1];\n  const nextSessionIds = nextKeys.unwrapOr([]);\n  return {\n    nextSessionIds: Array.isArray(nextSessionIds) ? nextSessionIds : [...nextSessionIds.values()],\n    sessionIds: Array.isArray(sessionIds) ? sessionIds : [...sessionIds.values()]\n  };\n}\nexport const keys = /*#__PURE__*/firstMemo((api, stashId) => api.derive.staking.keysMulti([stashId]));\nexport function keysMulti(instanceId, api) {\n  return memo(instanceId, stashIds => stashIds.length ? api.query.session.queuedKeys().pipe(switchMap(queuedKeys => combineLatest([of(queuedKeys), api.consts['session']?.['dedupKeyPrefix'] ? api.query.session.nextKeys.multi(stashIds.map(s => [api.consts['session']['dedupKeyPrefix'], s])) : combineLatest(stashIds.map(s => api.query.session.nextKeys(s)))])), map(([queuedKeys, nextKeys]) => stashIds.map((stashId, index) => extractsIds(stashId, queuedKeys, nextKeys[index])))) : of([]));\n}","map":{"version":3,"names":["combineLatest","map","of","switchMap","firstMemo","memo","extractsIds","stashId","queuedKeys","nextKeys","sessionIds","find","currentId","eq","undefined","nextSessionIds","unwrapOr","Array","isArray","values","keys","api","derive","staking","keysMulti","instanceId","stashIds","length","query","session","pipe","consts","multi","s","index"],"sources":["/home/ryoitsu/Documents/test/react-todo-app/node_modules/@polkadot/api-derive/staking/keys.js"],"sourcesContent":["import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { firstMemo, memo } from '../util/index.js';\nfunction extractsIds(stashId, queuedKeys, nextKeys) {\n    const sessionIds = (queuedKeys.find(([currentId]) => currentId.eq(stashId)) || [undefined, []])[1];\n    const nextSessionIds = nextKeys.unwrapOr([]);\n    return {\n        nextSessionIds: Array.isArray(nextSessionIds)\n            ? nextSessionIds\n            : [...nextSessionIds.values()],\n        sessionIds: Array.isArray(sessionIds)\n            ? sessionIds\n            : [...sessionIds.values()]\n    };\n}\nexport const keys = /*#__PURE__*/ firstMemo((api, stashId) => api.derive.staking.keysMulti([stashId]));\nexport function keysMulti(instanceId, api) {\n    return memo(instanceId, (stashIds) => stashIds.length\n        ? api.query.session.queuedKeys().pipe(switchMap((queuedKeys) => combineLatest([\n            of(queuedKeys),\n            api.consts['session']?.['dedupKeyPrefix']\n                ? api.query.session.nextKeys.multi(stashIds.map((s) => [api.consts['session']['dedupKeyPrefix'], s]))\n                : combineLatest(stashIds.map((s) => api.query.session.nextKeys(s)))\n        ])), map(([queuedKeys, nextKeys]) => stashIds.map((stashId, index) => extractsIds(stashId, queuedKeys, nextKeys[index]))))\n        : of([]));\n}\n"],"mappings":"AAAA,SAASA,aAAa,EAAEC,GAAG,EAAEC,EAAE,EAAEC,SAAS,QAAQ,MAAM;AACxD,SAASC,SAAS,EAAEC,IAAI,QAAQ,kBAAkB;AAClD,SAASC,WAAWA,CAACC,OAAO,EAAEC,UAAU,EAAEC,QAAQ,EAAE;EAChD,MAAMC,UAAU,GAAG,CAACF,UAAU,CAACG,IAAI,CAAC,CAAC,CAACC,SAAS,CAAC,KAAKA,SAAS,CAACC,EAAE,CAACN,OAAO,CAAC,CAAC,IAAI,CAACO,SAAS,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;EAClG,MAAMC,cAAc,GAAGN,QAAQ,CAACO,QAAQ,CAAC,EAAE,CAAC;EAC5C,OAAO;IACHD,cAAc,EAAEE,KAAK,CAACC,OAAO,CAACH,cAAc,CAAC,GACvCA,cAAc,GACd,CAAC,GAAGA,cAAc,CAACI,MAAM,CAAC,CAAC,CAAC;IAClCT,UAAU,EAAEO,KAAK,CAACC,OAAO,CAACR,UAAU,CAAC,GAC/BA,UAAU,GACV,CAAC,GAAGA,UAAU,CAACS,MAAM,CAAC,CAAC;EACjC,CAAC;AACL;AACA,OAAO,MAAMC,IAAI,GAAG,aAAchB,SAAS,CAAC,CAACiB,GAAG,EAAEd,OAAO,KAAKc,GAAG,CAACC,MAAM,CAACC,OAAO,CAACC,SAAS,CAAC,CAACjB,OAAO,CAAC,CAAC,CAAC;AACtG,OAAO,SAASiB,SAASA,CAACC,UAAU,EAAEJ,GAAG,EAAE;EACvC,OAAOhB,IAAI,CAACoB,UAAU,EAAGC,QAAQ,IAAKA,QAAQ,CAACC,MAAM,GAC/CN,GAAG,CAACO,KAAK,CAACC,OAAO,CAACrB,UAAU,CAAC,CAAC,CAACsB,IAAI,CAAC3B,SAAS,CAAEK,UAAU,IAAKR,aAAa,CAAC,CAC1EE,EAAE,CAACM,UAAU,CAAC,EACda,GAAG,CAACU,MAAM,CAAC,SAAS,CAAC,GAAG,gBAAgB,CAAC,GACnCV,GAAG,CAACO,KAAK,CAACC,OAAO,CAACpB,QAAQ,CAACuB,KAAK,CAACN,QAAQ,CAACzB,GAAG,CAAEgC,CAAC,IAAK,CAACZ,GAAG,CAACU,MAAM,CAAC,SAAS,CAAC,CAAC,gBAAgB,CAAC,EAAEE,CAAC,CAAC,CAAC,CAAC,GACnGjC,aAAa,CAAC0B,QAAQ,CAACzB,GAAG,CAAEgC,CAAC,IAAKZ,GAAG,CAACO,KAAK,CAACC,OAAO,CAACpB,QAAQ,CAACwB,CAAC,CAAC,CAAC,CAAC,CAC1E,CAAC,CAAC,EAAEhC,GAAG,CAAC,CAAC,CAACO,UAAU,EAAEC,QAAQ,CAAC,KAAKiB,QAAQ,CAACzB,GAAG,CAAC,CAACM,OAAO,EAAE2B,KAAK,KAAK5B,WAAW,CAACC,OAAO,EAAEC,UAAU,EAAEC,QAAQ,CAACyB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GACxHhC,EAAE,CAAC,EAAE,CAAC,CAAC;AACjB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}