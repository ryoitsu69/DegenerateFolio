{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SigningStargateClient = exports.createDefaultAminoConverters = exports.defaultRegistryTypes = void 0;\nconst amino_1 = require(\"@cosmjs/amino\");\nconst encoding_1 = require(\"@cosmjs/encoding\");\nconst math_1 = require(\"@cosmjs/math\");\nconst proto_signing_1 = require(\"@cosmjs/proto-signing\");\nconst tendermint_rpc_1 = require(\"@cosmjs/tendermint-rpc\");\nconst utils_1 = require(\"@cosmjs/utils\");\nconst coin_1 = require(\"cosmjs-types/cosmos/base/v1beta1/coin\");\nconst tx_1 = require(\"cosmjs-types/cosmos/distribution/v1beta1/tx\");\nconst tx_2 = require(\"cosmjs-types/cosmos/staking/v1beta1/tx\");\nconst signing_1 = require(\"cosmjs-types/cosmos/tx/signing/v1beta1/signing\");\nconst tx_3 = require(\"cosmjs-types/cosmos/tx/v1beta1/tx\");\nconst tx_4 = require(\"cosmjs-types/ibc/applications/transfer/v1/tx\");\nconst aminotypes_1 = require(\"./aminotypes\");\nconst fee_1 = require(\"./fee\");\nconst modules_1 = require(\"./modules\");\nconst modules_2 = require(\"./modules\");\nconst stargateclient_1 = require(\"./stargateclient\");\nexports.defaultRegistryTypes = [[\"/cosmos.base.v1beta1.Coin\", coin_1.Coin], ...modules_1.authzTypes, ...modules_1.bankTypes, ...modules_1.distributionTypes, ...modules_1.feegrantTypes, ...modules_1.govTypes, ...modules_1.groupTypes, ...modules_1.stakingTypes, ...modules_1.ibcTypes, ...modules_1.vestingTypes];\nfunction createDefaultAminoConverters() {\n  return {\n    ...(0, modules_2.createAuthzAminoConverters)(),\n    ...(0, modules_2.createBankAminoConverters)(),\n    ...(0, modules_2.createDistributionAminoConverters)(),\n    ...(0, modules_2.createGovAminoConverters)(),\n    ...(0, modules_2.createStakingAminoConverters)(),\n    ...(0, modules_2.createIbcAminoConverters)(),\n    ...(0, modules_2.createFeegrantAminoConverters)(),\n    ...(0, modules_2.createVestingAminoConverters)()\n  };\n}\nexports.createDefaultAminoConverters = createDefaultAminoConverters;\nclass SigningStargateClient extends stargateclient_1.StargateClient {\n  /**\n   * Creates an instance by connecting to the given CometBFT RPC endpoint.\n   *\n   * This uses auto-detection to decide between a CometBFT 0.38, Tendermint 0.37 and 0.34 client.\n   * To set the Comet client explicitly, use `createWithSigner`.\n   */\n  static async connectWithSigner(endpoint, signer, options = {}) {\n    const cometClient = await (0, tendermint_rpc_1.connectComet)(endpoint);\n    return SigningStargateClient.createWithSigner(cometClient, signer, options);\n  }\n  /**\n   * Creates an instance from a manually created Comet client.\n   * Use this to use `Comet38Client` or `Tendermint37Client` instead of `Tendermint34Client`.\n   */\n  static async createWithSigner(cometClient, signer, options = {}) {\n    return new SigningStargateClient(cometClient, signer, options);\n  }\n  /**\n   * Creates a client in offline mode.\n   *\n   * This should only be used in niche cases where you know exactly what you're doing,\n   * e.g. when building an offline signing application.\n   *\n   * When you try to use online functionality with such a signer, an\n   * exception will be raised.\n   */\n  static async offline(signer, options = {}) {\n    return new SigningStargateClient(undefined, signer, options);\n  }\n  constructor(cometClient, signer, options) {\n    super(cometClient, options);\n    const {\n      registry = new proto_signing_1.Registry(exports.defaultRegistryTypes),\n      aminoTypes = new aminotypes_1.AminoTypes(createDefaultAminoConverters())\n    } = options;\n    this.registry = registry;\n    this.aminoTypes = aminoTypes;\n    this.signer = signer;\n    this.broadcastTimeoutMs = options.broadcastTimeoutMs;\n    this.broadcastPollIntervalMs = options.broadcastPollIntervalMs;\n    this.gasPrice = options.gasPrice;\n  }\n  async simulate(signerAddress, messages, memo) {\n    const anyMsgs = messages.map(m => this.registry.encodeAsAny(m));\n    const accountFromSigner = (await this.signer.getAccounts()).find(account => account.address === signerAddress);\n    if (!accountFromSigner) {\n      throw new Error(\"Failed to retrieve account from signer\");\n    }\n    const pubkey = (0, amino_1.encodeSecp256k1Pubkey)(accountFromSigner.pubkey);\n    const {\n      sequence\n    } = await this.getSequence(signerAddress);\n    const {\n      gasInfo\n    } = await this.forceGetQueryClient().tx.simulate(anyMsgs, memo, pubkey, sequence);\n    (0, utils_1.assertDefined)(gasInfo);\n    return math_1.Uint53.fromString(gasInfo.gasUsed.toString()).toNumber();\n  }\n  async sendTokens(senderAddress, recipientAddress, amount, fee, memo = \"\") {\n    const sendMsg = {\n      typeUrl: \"/cosmos.bank.v1beta1.MsgSend\",\n      value: {\n        fromAddress: senderAddress,\n        toAddress: recipientAddress,\n        amount: [...amount]\n      }\n    };\n    return this.signAndBroadcast(senderAddress, [sendMsg], fee, memo);\n  }\n  async delegateTokens(delegatorAddress, validatorAddress, amount, fee, memo = \"\") {\n    const delegateMsg = {\n      typeUrl: \"/cosmos.staking.v1beta1.MsgDelegate\",\n      value: tx_2.MsgDelegate.fromPartial({\n        delegatorAddress: delegatorAddress,\n        validatorAddress: validatorAddress,\n        amount: amount\n      })\n    };\n    return this.signAndBroadcast(delegatorAddress, [delegateMsg], fee, memo);\n  }\n  async undelegateTokens(delegatorAddress, validatorAddress, amount, fee, memo = \"\") {\n    const undelegateMsg = {\n      typeUrl: \"/cosmos.staking.v1beta1.MsgUndelegate\",\n      value: tx_2.MsgUndelegate.fromPartial({\n        delegatorAddress: delegatorAddress,\n        validatorAddress: validatorAddress,\n        amount: amount\n      })\n    };\n    return this.signAndBroadcast(delegatorAddress, [undelegateMsg], fee, memo);\n  }\n  async withdrawRewards(delegatorAddress, validatorAddress, fee, memo = \"\") {\n    const withdrawMsg = {\n      typeUrl: \"/cosmos.distribution.v1beta1.MsgWithdrawDelegatorReward\",\n      value: tx_1.MsgWithdrawDelegatorReward.fromPartial({\n        delegatorAddress: delegatorAddress,\n        validatorAddress: validatorAddress\n      })\n    };\n    return this.signAndBroadcast(delegatorAddress, [withdrawMsg], fee, memo);\n  }\n  /**\n   * @deprecated This API does not support setting the memo field of `MsgTransfer` (only the transaction memo).\n   * We'll remove this method at some point because trying to wrap the various message types is a losing strategy.\n   * Please migrate to `signAndBroadcast` with an `MsgTransferEncodeObject` created in the caller code instead.\n   * @see https://github.com/cosmos/cosmjs/issues/1493\n   */\n  async sendIbcTokens(senderAddress, recipientAddress, transferAmount, sourcePort, sourceChannel, timeoutHeight, /** timeout in seconds */\n  timeoutTimestamp, fee, memo = \"\") {\n    const timeoutTimestampNanoseconds = timeoutTimestamp ? BigInt(timeoutTimestamp) * BigInt(1000000000) : undefined;\n    const transferMsg = {\n      typeUrl: \"/ibc.applications.transfer.v1.MsgTransfer\",\n      value: tx_4.MsgTransfer.fromPartial({\n        sourcePort: sourcePort,\n        sourceChannel: sourceChannel,\n        sender: senderAddress,\n        receiver: recipientAddress,\n        token: transferAmount,\n        timeoutHeight: timeoutHeight,\n        timeoutTimestamp: timeoutTimestampNanoseconds\n      })\n    };\n    return this.signAndBroadcast(senderAddress, [transferMsg], fee, memo);\n  }\n  async signAndBroadcast(signerAddress, messages, fee, memo = \"\", timeoutHeight) {\n    let usedFee;\n    if (fee == \"auto\" || typeof fee === \"number\") {\n      (0, utils_1.assertDefined)(this.gasPrice, \"Gas price must be set in the client options when auto gas is used.\");\n      const gasEstimation = await this.simulate(signerAddress, messages, memo);\n      // Starting with Cosmos SDK 0.47, we see many cases in which 1.3 is not enough anymore\n      // E.g. https://github.com/cosmos/cosmos-sdk/issues/16020\n      const multiplier = typeof fee === \"number\" ? fee : 1.4;\n      usedFee = (0, fee_1.calculateFee)(Math.round(gasEstimation * multiplier), this.gasPrice);\n    } else {\n      usedFee = fee;\n    }\n    const txRaw = await this.sign(signerAddress, messages, usedFee, memo, undefined, timeoutHeight);\n    const txBytes = tx_3.TxRaw.encode(txRaw).finish();\n    return this.broadcastTx(txBytes, this.broadcastTimeoutMs, this.broadcastPollIntervalMs);\n  }\n  /**\n   * This method is useful if you want to send a transaction in broadcast,\n   * without waiting for it to be placed inside a block, because for example\n   * I would like to receive the hash to later track the transaction with another tool.\n   * @returns Returns the hash of the transaction\n   */\n  async signAndBroadcastSync(signerAddress, messages, fee, memo = \"\", timeoutHeight) {\n    let usedFee;\n    if (fee == \"auto\" || typeof fee === \"number\") {\n      (0, utils_1.assertDefined)(this.gasPrice, \"Gas price must be set in the client options when auto gas is used.\");\n      const gasEstimation = await this.simulate(signerAddress, messages, memo);\n      const multiplier = typeof fee === \"number\" ? fee : 1.3;\n      usedFee = (0, fee_1.calculateFee)(Math.round(gasEstimation * multiplier), this.gasPrice);\n    } else {\n      usedFee = fee;\n    }\n    const txRaw = await this.sign(signerAddress, messages, usedFee, memo, undefined, timeoutHeight);\n    const txBytes = tx_3.TxRaw.encode(txRaw).finish();\n    return this.broadcastTxSync(txBytes);\n  }\n  /**\n   * Gets account number and sequence from the API, creates a sign doc,\n   * creates a single signature and assembles the signed transaction.\n   *\n   * The sign mode (SIGN_MODE_DIRECT or SIGN_MODE_LEGACY_AMINO_JSON) is determined by this client's signer.\n   *\n   * You can pass signer data (account number, sequence and chain ID) explicitly instead of querying them\n   * from the chain. This is needed when signing for a multisig account, but it also allows for offline signing\n   * (See the SigningStargateClient.offline constructor).\n   */\n  async sign(signerAddress, messages, fee, memo, explicitSignerData, timeoutHeight) {\n    let signerData;\n    if (explicitSignerData) {\n      signerData = explicitSignerData;\n    } else {\n      const {\n        accountNumber,\n        sequence\n      } = await this.getSequence(signerAddress);\n      const chainId = await this.getChainId();\n      signerData = {\n        accountNumber: accountNumber,\n        sequence: sequence,\n        chainId: chainId\n      };\n    }\n    return (0, proto_signing_1.isOfflineDirectSigner)(this.signer) ? this.signDirect(signerAddress, messages, fee, memo, signerData, timeoutHeight) : this.signAmino(signerAddress, messages, fee, memo, signerData, timeoutHeight);\n  }\n  async signAmino(signerAddress, messages, fee, memo, {\n    accountNumber,\n    sequence,\n    chainId\n  }, timeoutHeight) {\n    (0, utils_1.assert)(!(0, proto_signing_1.isOfflineDirectSigner)(this.signer));\n    const accountFromSigner = (await this.signer.getAccounts()).find(account => account.address === signerAddress);\n    if (!accountFromSigner) {\n      throw new Error(\"Failed to retrieve account from signer\");\n    }\n    const pubkey = (0, proto_signing_1.encodePubkey)((0, amino_1.encodeSecp256k1Pubkey)(accountFromSigner.pubkey));\n    const signMode = signing_1.SignMode.SIGN_MODE_LEGACY_AMINO_JSON;\n    const msgs = messages.map(msg => this.aminoTypes.toAmino(msg));\n    const signDoc = (0, amino_1.makeSignDoc)(msgs, fee, chainId, memo, accountNumber, sequence, timeoutHeight);\n    const {\n      signature,\n      signed\n    } = await this.signer.signAmino(signerAddress, signDoc);\n    const signedTxBody = {\n      messages: signed.msgs.map(msg => this.aminoTypes.fromAmino(msg)),\n      memo: signed.memo,\n      timeoutHeight: timeoutHeight\n    };\n    const signedTxBodyEncodeObject = {\n      typeUrl: \"/cosmos.tx.v1beta1.TxBody\",\n      value: signedTxBody\n    };\n    const signedTxBodyBytes = this.registry.encode(signedTxBodyEncodeObject);\n    const signedGasLimit = math_1.Int53.fromString(signed.fee.gas).toNumber();\n    const signedSequence = math_1.Int53.fromString(signed.sequence).toNumber();\n    const signedAuthInfoBytes = (0, proto_signing_1.makeAuthInfoBytes)([{\n      pubkey,\n      sequence: signedSequence\n    }], signed.fee.amount, signedGasLimit, signed.fee.granter, signed.fee.payer, signMode);\n    return tx_3.TxRaw.fromPartial({\n      bodyBytes: signedTxBodyBytes,\n      authInfoBytes: signedAuthInfoBytes,\n      signatures: [(0, encoding_1.fromBase64)(signature.signature)]\n    });\n  }\n  async signDirect(signerAddress, messages, fee, memo, {\n    accountNumber,\n    sequence,\n    chainId\n  }, timeoutHeight) {\n    (0, utils_1.assert)((0, proto_signing_1.isOfflineDirectSigner)(this.signer));\n    const accountFromSigner = (await this.signer.getAccounts()).find(account => account.address === signerAddress);\n    if (!accountFromSigner) {\n      throw new Error(\"Failed to retrieve account from signer\");\n    }\n    const pubkey = (0, proto_signing_1.encodePubkey)((0, amino_1.encodeSecp256k1Pubkey)(accountFromSigner.pubkey));\n    const txBodyEncodeObject = {\n      typeUrl: \"/cosmos.tx.v1beta1.TxBody\",\n      value: {\n        messages: messages,\n        memo: memo,\n        timeoutHeight: timeoutHeight\n      }\n    };\n    const txBodyBytes = this.registry.encode(txBodyEncodeObject);\n    const gasLimit = math_1.Int53.fromString(fee.gas).toNumber();\n    const authInfoBytes = (0, proto_signing_1.makeAuthInfoBytes)([{\n      pubkey,\n      sequence\n    }], fee.amount, gasLimit, fee.granter, fee.payer);\n    const signDoc = (0, proto_signing_1.makeSignDoc)(txBodyBytes, authInfoBytes, chainId, accountNumber);\n    const {\n      signature,\n      signed\n    } = await this.signer.signDirect(signerAddress, signDoc);\n    return tx_3.TxRaw.fromPartial({\n      bodyBytes: signed.bodyBytes,\n      authInfoBytes: signed.authInfoBytes,\n      signatures: [(0, encoding_1.fromBase64)(signature.signature)]\n    });\n  }\n}\nexports.SigningStargateClient = SigningStargateClient;","map":{"version":3,"names":["amino_1","require","encoding_1","math_1","proto_signing_1","tendermint_rpc_1","utils_1","coin_1","tx_1","tx_2","signing_1","tx_3","tx_4","aminotypes_1","fee_1","modules_1","modules_2","stargateclient_1","exports","defaultRegistryTypes","Coin","authzTypes","bankTypes","distributionTypes","feegrantTypes","govTypes","groupTypes","stakingTypes","ibcTypes","vestingTypes","createDefaultAminoConverters","createAuthzAminoConverters","createBankAminoConverters","createDistributionAminoConverters","createGovAminoConverters","createStakingAminoConverters","createIbcAminoConverters","createFeegrantAminoConverters","createVestingAminoConverters","SigningStargateClient","StargateClient","connectWithSigner","endpoint","signer","options","cometClient","connectComet","createWithSigner","offline","undefined","constructor","registry","Registry","aminoTypes","AminoTypes","broadcastTimeoutMs","broadcastPollIntervalMs","gasPrice","simulate","signerAddress","messages","memo","anyMsgs","map","m","encodeAsAny","accountFromSigner","getAccounts","find","account","address","Error","pubkey","encodeSecp256k1Pubkey","sequence","getSequence","gasInfo","forceGetQueryClient","tx","assertDefined","Uint53","fromString","gasUsed","toString","toNumber","sendTokens","senderAddress","recipientAddress","amount","fee","sendMsg","typeUrl","value","fromAddress","toAddress","signAndBroadcast","delegateTokens","delegatorAddress","validatorAddress","delegateMsg","MsgDelegate","fromPartial","undelegateTokens","undelegateMsg","MsgUndelegate","withdrawRewards","withdrawMsg","MsgWithdrawDelegatorReward","sendIbcTokens","transferAmount","sourcePort","sourceChannel","timeoutHeight","timeoutTimestamp","timeoutTimestampNanoseconds","BigInt","transferMsg","MsgTransfer","sender","receiver","token","usedFee","gasEstimation","multiplier","calculateFee","Math","round","txRaw","sign","txBytes","TxRaw","encode","finish","broadcastTx","signAndBroadcastSync","broadcastTxSync","explicitSignerData","signerData","accountNumber","chainId","getChainId","isOfflineDirectSigner","signDirect","signAmino","assert","encodePubkey","signMode","SignMode","SIGN_MODE_LEGACY_AMINO_JSON","msgs","msg","toAmino","signDoc","makeSignDoc","signature","signed","signedTxBody","fromAmino","signedTxBodyEncodeObject","signedTxBodyBytes","signedGasLimit","Int53","gas","signedSequence","signedAuthInfoBytes","makeAuthInfoBytes","granter","payer","bodyBytes","authInfoBytes","signatures","fromBase64","txBodyEncodeObject","txBodyBytes","gasLimit"],"sources":["../src/signingstargateclient.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}