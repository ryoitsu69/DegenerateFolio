{"ast":null,"code":"import _defineProperty from \"/home/ryoitsu/Documents/test/react-todo-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { extractAuthor } from './util.js';\nfunction mapExtrinsics(extrinsics, records) {\n  return extrinsics.map((extrinsic, index) => {\n    let dispatchError;\n    let dispatchInfo;\n    const events = records.filter(_ref => {\n      let {\n        phase\n      } = _ref;\n      return phase.isApplyExtrinsic && phase.asApplyExtrinsic.eq(index);\n    }).map(_ref2 => {\n      let {\n        event\n      } = _ref2;\n      if (event.section === 'system') {\n        if (event.method === 'ExtrinsicSuccess') {\n          dispatchInfo = event.data[0];\n        } else if (event.method === 'ExtrinsicFailed') {\n          dispatchError = event.data[0];\n          dispatchInfo = event.data[1];\n        }\n      }\n      return event;\n    });\n    return {\n      dispatchError,\n      dispatchInfo,\n      events,\n      extrinsic\n    };\n  });\n}\nexport function createSignedBlockExtended(registry, block, events, validators, author) {\n  // an instance of the base extrinsic for us to extend\n  const SignedBlockBase = registry.createClass('SignedBlock');\n  class Implementation extends SignedBlockBase {\n    constructor(registry, block, events, validators, author) {\n      super(registry, block);\n      _defineProperty(this, \"__internal__author\", void 0);\n      _defineProperty(this, \"__internal__events\", void 0);\n      _defineProperty(this, \"__internal__extrinsics\", void 0);\n      this.__internal__author = author || extractAuthor(this.block.header.digest, validators || []);\n      this.__internal__events = events || [];\n      this.__internal__extrinsics = mapExtrinsics(this.block.extrinsics, this.__internal__events);\n      this.createdAtHash = block === null || block === void 0 ? void 0 : block.createdAtHash;\n    }\n    /**\n     * @description Convenience method, returns the author for the block\n     */\n    get author() {\n      return this.__internal__author;\n    }\n    /**\n     * @description Convenience method, returns the events associated with the block\n     */\n    get events() {\n      return this.__internal__events;\n    }\n    /**\n     * @description Returns the extrinsics and their events, mapped\n     */\n    get extrinsics() {\n      return this.__internal__extrinsics;\n    }\n  }\n  return new Implementation(registry, block, events, validators, author);\n}","map":{"version":3,"names":["extractAuthor","mapExtrinsics","extrinsics","records","map","extrinsic","index","dispatchError","dispatchInfo","events","filter","_ref","phase","isApplyExtrinsic","asApplyExtrinsic","eq","_ref2","event","section","method","data","createSignedBlockExtended","registry","block","validators","author","SignedBlockBase","createClass","Implementation","constructor","_defineProperty","__internal__author","header","digest","__internal__events","__internal__extrinsics","createdAtHash"],"sources":["/home/ryoitsu/Documents/test/react-todo-app/node_modules/@polkadot/api-derive/type/SignedBlockExtended.js"],"sourcesContent":["import { extractAuthor } from './util.js';\nfunction mapExtrinsics(extrinsics, records) {\n    return extrinsics.map((extrinsic, index) => {\n        let dispatchError;\n        let dispatchInfo;\n        const events = records\n            .filter(({ phase }) => phase.isApplyExtrinsic && phase.asApplyExtrinsic.eq(index))\n            .map(({ event }) => {\n            if (event.section === 'system') {\n                if (event.method === 'ExtrinsicSuccess') {\n                    dispatchInfo = event.data[0];\n                }\n                else if (event.method === 'ExtrinsicFailed') {\n                    dispatchError = event.data[0];\n                    dispatchInfo = event.data[1];\n                }\n            }\n            return event;\n        });\n        return { dispatchError, dispatchInfo, events, extrinsic };\n    });\n}\nexport function createSignedBlockExtended(registry, block, events, validators, author) {\n    // an instance of the base extrinsic for us to extend\n    const SignedBlockBase = registry.createClass('SignedBlock');\n    class Implementation extends SignedBlockBase {\n        __internal__author;\n        __internal__events;\n        __internal__extrinsics;\n        constructor(registry, block, events, validators, author) {\n            super(registry, block);\n            this.__internal__author = author || extractAuthor(this.block.header.digest, validators || []);\n            this.__internal__events = events || [];\n            this.__internal__extrinsics = mapExtrinsics(this.block.extrinsics, this.__internal__events);\n            this.createdAtHash = block?.createdAtHash;\n        }\n        /**\n         * @description Convenience method, returns the author for the block\n         */\n        get author() {\n            return this.__internal__author;\n        }\n        /**\n         * @description Convenience method, returns the events associated with the block\n         */\n        get events() {\n            return this.__internal__events;\n        }\n        /**\n         * @description Returns the extrinsics and their events, mapped\n         */\n        get extrinsics() {\n            return this.__internal__extrinsics;\n        }\n    }\n    return new Implementation(registry, block, events, validators, author);\n}\n"],"mappings":";AAAA,SAASA,aAAa,QAAQ,WAAW;AACzC,SAASC,aAAaA,CAACC,UAAU,EAAEC,OAAO,EAAE;EACxC,OAAOD,UAAU,CAACE,GAAG,CAAC,CAACC,SAAS,EAAEC,KAAK,KAAK;IACxC,IAAIC,aAAa;IACjB,IAAIC,YAAY;IAChB,MAAMC,MAAM,GAAGN,OAAO,CACjBO,MAAM,CAACC,IAAA;MAAA,IAAC;QAAEC;MAAM,CAAC,GAAAD,IAAA;MAAA,OAAKC,KAAK,CAACC,gBAAgB,IAAID,KAAK,CAACE,gBAAgB,CAACC,EAAE,CAACT,KAAK,CAAC;IAAA,EAAC,CACjFF,GAAG,CAACY,KAAA,IAAe;MAAA,IAAd;QAAEC;MAAM,CAAC,GAAAD,KAAA;MACf,IAAIC,KAAK,CAACC,OAAO,KAAK,QAAQ,EAAE;QAC5B,IAAID,KAAK,CAACE,MAAM,KAAK,kBAAkB,EAAE;UACrCX,YAAY,GAAGS,KAAK,CAACG,IAAI,CAAC,CAAC,CAAC;QAChC,CAAC,MACI,IAAIH,KAAK,CAACE,MAAM,KAAK,iBAAiB,EAAE;UACzCZ,aAAa,GAAGU,KAAK,CAACG,IAAI,CAAC,CAAC,CAAC;UAC7BZ,YAAY,GAAGS,KAAK,CAACG,IAAI,CAAC,CAAC,CAAC;QAChC;MACJ;MACA,OAAOH,KAAK;IAChB,CAAC,CAAC;IACF,OAAO;MAAEV,aAAa;MAAEC,YAAY;MAAEC,MAAM;MAAEJ;IAAU,CAAC;EAC7D,CAAC,CAAC;AACN;AACA,OAAO,SAASgB,yBAAyBA,CAACC,QAAQ,EAAEC,KAAK,EAAEd,MAAM,EAAEe,UAAU,EAAEC,MAAM,EAAE;EACnF;EACA,MAAMC,eAAe,GAAGJ,QAAQ,CAACK,WAAW,CAAC,aAAa,CAAC;EAC3D,MAAMC,cAAc,SAASF,eAAe,CAAC;IAIzCG,WAAWA,CAACP,QAAQ,EAAEC,KAAK,EAAEd,MAAM,EAAEe,UAAU,EAAEC,MAAM,EAAE;MACrD,KAAK,CAACH,QAAQ,EAAEC,KAAK,CAAC;MAACO,eAAA;MAAAA,eAAA;MAAAA,eAAA;MACvB,IAAI,CAACC,kBAAkB,GAAGN,MAAM,IAAIzB,aAAa,CAAC,IAAI,CAACuB,KAAK,CAACS,MAAM,CAACC,MAAM,EAAET,UAAU,IAAI,EAAE,CAAC;MAC7F,IAAI,CAACU,kBAAkB,GAAGzB,MAAM,IAAI,EAAE;MACtC,IAAI,CAAC0B,sBAAsB,GAAGlC,aAAa,CAAC,IAAI,CAACsB,KAAK,CAACrB,UAAU,EAAE,IAAI,CAACgC,kBAAkB,CAAC;MAC3F,IAAI,CAACE,aAAa,GAAGb,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEa,aAAa;IAC7C;IACA;AACR;AACA;IACQ,IAAIX,MAAMA,CAAA,EAAG;MACT,OAAO,IAAI,CAACM,kBAAkB;IAClC;IACA;AACR;AACA;IACQ,IAAItB,MAAMA,CAAA,EAAG;MACT,OAAO,IAAI,CAACyB,kBAAkB;IAClC;IACA;AACR;AACA;IACQ,IAAIhC,UAAUA,CAAA,EAAG;MACb,OAAO,IAAI,CAACiC,sBAAsB;IACtC;EACJ;EACA,OAAO,IAAIP,cAAc,CAACN,QAAQ,EAAEC,KAAK,EAAEd,MAAM,EAAEe,UAAU,EAAEC,MAAM,CAAC;AAC1E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}