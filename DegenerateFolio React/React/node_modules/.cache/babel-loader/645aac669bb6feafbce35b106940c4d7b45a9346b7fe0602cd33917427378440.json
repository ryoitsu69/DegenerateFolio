{"ast":null,"code":"import { isFunction, noop } from '@polkadot/util';\nexport class Combinator {\n  __internal__allHasFired = false;\n  __internal__callback;\n  __internal__fired = [];\n  __internal__fns = [];\n  __internal__isActive = true;\n  __internal__results = [];\n  __internal__subscriptions = [];\n  constructor(fns, callback) {\n    this.__internal__callback = callback;\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises, @typescript-eslint/require-await\n    this.__internal__subscriptions = fns.map(async (input, index) => {\n      const [fn, ...args] = Array.isArray(input) ? input : [input];\n      this.__internal__fired.push(false);\n      this.__internal__fns.push(fn);\n      // Not quite 100% how to have a variable number at the front here\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-return,@typescript-eslint/ban-types\n      return fn(...args, this._createCallback(index));\n    });\n  }\n  _allHasFired() {\n    this.__internal__allHasFired ||= this.__internal__fired.filter(hasFired => !hasFired).length === 0;\n    return this.__internal__allHasFired;\n  }\n  _createCallback(index) {\n    return value => {\n      this.__internal__fired[index] = true;\n      this.__internal__results[index] = value;\n      this._triggerUpdate();\n    };\n  }\n  _triggerUpdate() {\n    if (!this.__internal__isActive || !isFunction(this.__internal__callback) || !this._allHasFired()) {\n      return;\n    }\n    try {\n      Promise.resolve(this.__internal__callback(this.__internal__results)).catch(noop);\n    } catch {\n      // swallow, we don't want the handler to trip us up\n    }\n  }\n  unsubscribe() {\n    if (!this.__internal__isActive) {\n      return;\n    }\n    this.__internal__isActive = false;\n    Promise.all(this.__internal__subscriptions.map(async subscription => {\n      try {\n        const unsubscribe = await subscription;\n        if (isFunction(unsubscribe)) {\n          unsubscribe();\n        }\n      } catch {\n        // ignore\n      }\n    })).catch(() => {\n      // ignore, already ignored above, should never throw\n    });\n  }\n}","map":{"version":3,"names":["isFunction","noop","Combinator","__internal__allHasFired","__internal__callback","__internal__fired","__internal__fns","__internal__isActive","__internal__results","__internal__subscriptions","constructor","fns","callback","map","input","index","fn","args","Array","isArray","push","_createCallback","_allHasFired","filter","hasFired","length","value","_triggerUpdate","Promise","resolve","catch","unsubscribe","all","subscription"],"sources":["/home/ryoitsu/Documents/test/react-todo-app/node_modules/@polkadot/api/promise/Combinator.js"],"sourcesContent":["import { isFunction, noop } from '@polkadot/util';\nexport class Combinator {\n    __internal__allHasFired = false;\n    __internal__callback;\n    __internal__fired = [];\n    __internal__fns = [];\n    __internal__isActive = true;\n    __internal__results = [];\n    __internal__subscriptions = [];\n    constructor(fns, callback) {\n        this.__internal__callback = callback;\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises, @typescript-eslint/require-await\n        this.__internal__subscriptions = fns.map(async (input, index) => {\n            const [fn, ...args] = Array.isArray(input)\n                ? input\n                : [input];\n            this.__internal__fired.push(false);\n            this.__internal__fns.push(fn);\n            // Not quite 100% how to have a variable number at the front here\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return,@typescript-eslint/ban-types\n            return fn(...args, this._createCallback(index));\n        });\n    }\n    _allHasFired() {\n        this.__internal__allHasFired ||= this.__internal__fired.filter((hasFired) => !hasFired).length === 0;\n        return this.__internal__allHasFired;\n    }\n    _createCallback(index) {\n        return (value) => {\n            this.__internal__fired[index] = true;\n            this.__internal__results[index] = value;\n            this._triggerUpdate();\n        };\n    }\n    _triggerUpdate() {\n        if (!this.__internal__isActive || !isFunction(this.__internal__callback) || !this._allHasFired()) {\n            return;\n        }\n        try {\n            Promise\n                .resolve(this.__internal__callback(this.__internal__results))\n                .catch(noop);\n        }\n        catch {\n            // swallow, we don't want the handler to trip us up\n        }\n    }\n    unsubscribe() {\n        if (!this.__internal__isActive) {\n            return;\n        }\n        this.__internal__isActive = false;\n        Promise\n            .all(this.__internal__subscriptions.map(async (subscription) => {\n            try {\n                const unsubscribe = await subscription;\n                if (isFunction(unsubscribe)) {\n                    unsubscribe();\n                }\n            }\n            catch {\n                // ignore\n            }\n        })).catch(() => {\n            // ignore, already ignored above, should never throw\n        });\n    }\n}\n"],"mappings":"AAAA,SAASA,UAAU,EAAEC,IAAI,QAAQ,gBAAgB;AACjD,OAAO,MAAMC,UAAU,CAAC;EACpBC,uBAAuB,GAAG,KAAK;EAC/BC,oBAAoB;EACpBC,iBAAiB,GAAG,EAAE;EACtBC,eAAe,GAAG,EAAE;EACpBC,oBAAoB,GAAG,IAAI;EAC3BC,mBAAmB,GAAG,EAAE;EACxBC,yBAAyB,GAAG,EAAE;EAC9BC,WAAWA,CAACC,GAAG,EAAEC,QAAQ,EAAE;IACvB,IAAI,CAACR,oBAAoB,GAAGQ,QAAQ;IACpC;IACA,IAAI,CAACH,yBAAyB,GAAGE,GAAG,CAACE,GAAG,CAAC,OAAOC,KAAK,EAAEC,KAAK,KAAK;MAC7D,MAAM,CAACC,EAAE,EAAE,GAAGC,IAAI,CAAC,GAAGC,KAAK,CAACC,OAAO,CAACL,KAAK,CAAC,GACpCA,KAAK,GACL,CAACA,KAAK,CAAC;MACb,IAAI,CAACT,iBAAiB,CAACe,IAAI,CAAC,KAAK,CAAC;MAClC,IAAI,CAACd,eAAe,CAACc,IAAI,CAACJ,EAAE,CAAC;MAC7B;MACA;MACA,OAAOA,EAAE,CAAC,GAAGC,IAAI,EAAE,IAAI,CAACI,eAAe,CAACN,KAAK,CAAC,CAAC;IACnD,CAAC,CAAC;EACN;EACAO,YAAYA,CAAA,EAAG;IACX,IAAI,CAACnB,uBAAuB,KAAK,IAAI,CAACE,iBAAiB,CAACkB,MAAM,CAAEC,QAAQ,IAAK,CAACA,QAAQ,CAAC,CAACC,MAAM,KAAK,CAAC;IACpG,OAAO,IAAI,CAACtB,uBAAuB;EACvC;EACAkB,eAAeA,CAACN,KAAK,EAAE;IACnB,OAAQW,KAAK,IAAK;MACd,IAAI,CAACrB,iBAAiB,CAACU,KAAK,CAAC,GAAG,IAAI;MACpC,IAAI,CAACP,mBAAmB,CAACO,KAAK,CAAC,GAAGW,KAAK;MACvC,IAAI,CAACC,cAAc,CAAC,CAAC;IACzB,CAAC;EACL;EACAA,cAAcA,CAAA,EAAG;IACb,IAAI,CAAC,IAAI,CAACpB,oBAAoB,IAAI,CAACP,UAAU,CAAC,IAAI,CAACI,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAACkB,YAAY,CAAC,CAAC,EAAE;MAC9F;IACJ;IACA,IAAI;MACAM,OAAO,CACFC,OAAO,CAAC,IAAI,CAACzB,oBAAoB,CAAC,IAAI,CAACI,mBAAmB,CAAC,CAAC,CAC5DsB,KAAK,CAAC7B,IAAI,CAAC;IACpB,CAAC,CACD,MAAM;MACF;IAAA;EAER;EACA8B,WAAWA,CAAA,EAAG;IACV,IAAI,CAAC,IAAI,CAACxB,oBAAoB,EAAE;MAC5B;IACJ;IACA,IAAI,CAACA,oBAAoB,GAAG,KAAK;IACjCqB,OAAO,CACFI,GAAG,CAAC,IAAI,CAACvB,yBAAyB,CAACI,GAAG,CAAC,MAAOoB,YAAY,IAAK;MAChE,IAAI;QACA,MAAMF,WAAW,GAAG,MAAME,YAAY;QACtC,IAAIjC,UAAU,CAAC+B,WAAW,CAAC,EAAE;UACzBA,WAAW,CAAC,CAAC;QACjB;MACJ,CAAC,CACD,MAAM;QACF;MAAA;IAER,CAAC,CAAC,CAAC,CAACD,KAAK,CAAC,MAAM;MACZ;IAAA,CACH,CAAC;EACN;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}