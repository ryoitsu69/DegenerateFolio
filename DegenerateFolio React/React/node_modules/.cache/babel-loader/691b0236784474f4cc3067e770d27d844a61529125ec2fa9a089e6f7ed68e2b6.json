{"ast":null,"code":"/**\n * \"Client\" wraps \"ws\" or a browser-implemented \"WebSocket\" library\n * according to the environment providing JSON RPC 2.0 support on top.\n * @module Client\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\nvar _eventemitter = require(\"eventemitter3\");\nvar _utils = require(\"./utils\");\nfunction _callSuper(t, o, e) {\n  return o = (0, _getPrototypeOf2[\"default\"])(o), (0, _possibleConstructorReturn2[\"default\"])(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], (0, _getPrototypeOf2[\"default\"])(t).constructor) : o.apply(t, e));\n}\nfunction _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  })();\n}\nvar __rest = void 0 && (void 0).__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n// @ts-ignore\nvar CommonClient = exports[\"default\"] = /*#__PURE__*/function (_EventEmitter) {\n  /**\n   * Instantiate a Client class.\n   * @constructor\n   * @param {webSocketFactory} webSocketFactory - factory method for WebSocket\n   * @param {String} address - url to a websocket server\n   * @param {Object} options - ws options object with reconnect parameters\n   * @param {Function} generate_request_id - custom generation request Id\n   * @param {DataPack} dataPack - data pack contains encoder and decoder\n   * @return {CommonClient}\n   */\n  function CommonClient(webSocketFactory) {\n    var _this;\n    var address = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"ws://localhost:8080\";\n    var _a = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var generate_request_id = arguments.length > 3 ? arguments[3] : undefined;\n    var dataPack = arguments.length > 4 ? arguments[4] : undefined;\n    (0, _classCallCheck2[\"default\"])(this, CommonClient);\n    var _a$autoconnect = _a.autoconnect,\n      autoconnect = _a$autoconnect === void 0 ? true : _a$autoconnect,\n      _a$reconnect = _a.reconnect,\n      reconnect = _a$reconnect === void 0 ? true : _a$reconnect,\n      _a$reconnect_interval = _a.reconnect_interval,\n      reconnect_interval = _a$reconnect_interval === void 0 ? 1000 : _a$reconnect_interval,\n      _a$max_reconnects = _a.max_reconnects,\n      max_reconnects = _a$max_reconnects === void 0 ? 5 : _a$max_reconnects,\n      rest_options = __rest(_a, [\"autoconnect\", \"reconnect\", \"reconnect_interval\", \"max_reconnects\"]);\n    _this = _callSuper(this, CommonClient);\n    _this.webSocketFactory = webSocketFactory;\n    _this.queue = {};\n    _this.rpc_id = 0;\n    _this.address = address;\n    _this.autoconnect = autoconnect;\n    _this.ready = false;\n    _this.reconnect = reconnect;\n    _this.reconnect_timer_id = undefined;\n    _this.reconnect_interval = reconnect_interval;\n    _this.max_reconnects = max_reconnects;\n    _this.rest_options = rest_options;\n    _this.current_reconnects = 0;\n    _this.generate_request_id = generate_request_id || function () {\n      return ++_this.rpc_id;\n    };\n    if (!dataPack) _this.dataPack = new _utils.DefaultDataPack();else _this.dataPack = dataPack;\n    if (_this.autoconnect) _this._connect(_this.address, Object.assign({\n      autoconnect: _this.autoconnect,\n      reconnect: _this.reconnect,\n      reconnect_interval: _this.reconnect_interval,\n      max_reconnects: _this.max_reconnects\n    }, _this.rest_options));\n    return _this;\n  }\n  /**\n   * Connects to a defined server if not connected already.\n   * @method\n   * @return {Undefined}\n   */\n  (0, _inherits2[\"default\"])(CommonClient, _EventEmitter);\n  return (0, _createClass2[\"default\"])(CommonClient, [{\n    key: \"connect\",\n    value: function connect() {\n      if (this.socket) return;\n      this._connect(this.address, Object.assign({\n        autoconnect: this.autoconnect,\n        reconnect: this.reconnect,\n        reconnect_interval: this.reconnect_interval,\n        max_reconnects: this.max_reconnects\n      }, this.rest_options));\n    }\n    /**\n     * Calls a registered RPC method on server.\n     * @method\n     * @param {String} method - RPC method name\n     * @param {Object|Array} params - optional method parameters\n     * @param {Number} timeout - RPC reply timeout value\n     * @param {Object} ws_opts - options passed to ws\n     * @return {Promise}\n     */\n  }, {\n    key: \"call\",\n    value: function call(method, params, timeout, ws_opts) {\n      var _this2 = this;\n      if (!ws_opts && \"object\" === (0, _typeof2[\"default\"])(timeout)) {\n        ws_opts = timeout;\n        timeout = null;\n      }\n      return new Promise(function (resolve, reject) {\n        if (!_this2.ready) return reject(new Error(\"socket not ready\"));\n        var rpc_id = _this2.generate_request_id(method, params);\n        var message = {\n          jsonrpc: \"2.0\",\n          method: method,\n          params: params || undefined,\n          id: rpc_id\n        };\n        _this2.socket.send(_this2.dataPack.encode(message), ws_opts, function (error) {\n          if (error) return reject(error);\n          _this2.queue[rpc_id] = {\n            promise: [resolve, reject]\n          };\n          if (timeout) {\n            _this2.queue[rpc_id].timeout = setTimeout(function () {\n              delete _this2.queue[rpc_id];\n              reject(new Error(\"reply timeout\"));\n            }, timeout);\n          }\n        });\n      });\n    }\n    /**\n     * Logins with the other side of the connection.\n     * @method\n     * @param {Object} params - Login credentials object\n     * @return {Promise}\n     */\n  }, {\n    key: \"login\",\n    value: function () {\n      var _login = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(params) {\n        var resp;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.call(\"rpc.login\", params);\n            case 2:\n              resp = _context.sent;\n              if (resp) {\n                _context.next = 5;\n                break;\n              }\n              throw new Error(\"authentication failed\");\n            case 5:\n              return _context.abrupt(\"return\", resp);\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function login(_x) {\n        return _login.apply(this, arguments);\n      }\n      return login;\n    }()\n    /**\n     * Fetches a list of client's methods registered on server.\n     * @method\n     * @return {Array}\n     */\n  }, {\n    key: \"listMethods\",\n    value: function () {\n      var _listMethods = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2() {\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return this.call(\"__listMethods\");\n            case 2:\n              return _context2.abrupt(\"return\", _context2.sent);\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function listMethods() {\n        return _listMethods.apply(this, arguments);\n      }\n      return listMethods;\n    }()\n    /**\n     * Sends a JSON-RPC 2.0 notification to server.\n     * @method\n     * @param {String} method - RPC method name\n     * @param {Object} params - optional method parameters\n     * @return {Promise}\n     */\n  }, {\n    key: \"notify\",\n    value: function notify(method, params) {\n      var _this3 = this;\n      return new Promise(function (resolve, reject) {\n        if (!_this3.ready) return reject(new Error(\"socket not ready\"));\n        var message = {\n          jsonrpc: \"2.0\",\n          method: method,\n          params: params\n        };\n        _this3.socket.send(_this3.dataPack.encode(message), function (error) {\n          if (error) return reject(error);\n          resolve();\n        });\n      });\n    }\n    /**\n     * Subscribes for a defined event.\n     * @method\n     * @param {String|Array} event - event name\n     * @return {Undefined}\n     * @throws {Error}\n     */\n  }, {\n    key: \"subscribe\",\n    value: function () {\n      var _subscribe = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(event) {\n        var result;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              if (typeof event === \"string\") event = [event];\n              _context3.next = 3;\n              return this.call(\"rpc.on\", event);\n            case 3:\n              result = _context3.sent;\n              if (!(typeof event === \"string\" && result[event] !== \"ok\")) {\n                _context3.next = 6;\n                break;\n              }\n              throw new Error(\"Failed subscribing to an event '\" + event + \"' with: \" + result[event]);\n            case 6:\n              return _context3.abrupt(\"return\", result);\n            case 7:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function subscribe(_x2) {\n        return _subscribe.apply(this, arguments);\n      }\n      return subscribe;\n    }()\n    /**\n     * Unsubscribes from a defined event.\n     * @method\n     * @param {String|Array} event - event name\n     * @return {Undefined}\n     * @throws {Error}\n     */\n  }, {\n    key: \"unsubscribe\",\n    value: function () {\n      var _unsubscribe = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(event) {\n        var result;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              if (typeof event === \"string\") event = [event];\n              _context4.next = 3;\n              return this.call(\"rpc.off\", event);\n            case 3:\n              result = _context4.sent;\n              if (!(typeof event === \"string\" && result[event] !== \"ok\")) {\n                _context4.next = 6;\n                break;\n              }\n              throw new Error(\"Failed unsubscribing from an event with: \" + result);\n            case 6:\n              return _context4.abrupt(\"return\", result);\n            case 7:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this);\n      }));\n      function unsubscribe(_x3) {\n        return _unsubscribe.apply(this, arguments);\n      }\n      return unsubscribe;\n    }()\n    /**\n     * Closes a WebSocket connection gracefully.\n     * @method\n     * @param {Number} code - socket close code\n     * @param {String} data - optional data to be sent before closing\n     * @return {Undefined}\n     */\n  }, {\n    key: \"close\",\n    value: function close(code, data) {\n      this.socket.close(code || 1000, data);\n    }\n    /**\n     * Enable / disable automatic reconnection.\n     * @method\n     * @param {Boolean} reconnect - enable / disable reconnection\n     * @return {Undefined}\n     */\n  }, {\n    key: \"setAutoReconnect\",\n    value: function setAutoReconnect(reconnect) {\n      this.reconnect = reconnect;\n    }\n    /**\n     * Set the interval between reconnection attempts.\n     * @method\n     * @param {Number} interval - reconnection interval in milliseconds\n     * @return {Undefined}\n     */\n  }, {\n    key: \"setReconnectInterval\",\n    value: function setReconnectInterval(interval) {\n      this.reconnect_interval = interval;\n    }\n    /**\n     * Set the maximum number of reconnection attempts.\n     * @method\n     * @param {Number} max_reconnects - maximum reconnection attempts\n     * @return {Undefined}\n     */\n  }, {\n    key: \"setMaxReconnects\",\n    value: function setMaxReconnects(max_reconnects) {\n      this.max_reconnects = max_reconnects;\n    }\n    /**\n     * Connection/Message handler.\n     * @method\n     * @private\n     * @param {String} address - WebSocket API address\n     * @param {Object} options - ws options object\n     * @return {Undefined}\n     */\n  }, {\n    key: \"_connect\",\n    value: function _connect(address, options) {\n      var _this4 = this;\n      clearTimeout(this.reconnect_timer_id);\n      this.socket = this.webSocketFactory(address, options);\n      this.socket.addEventListener(\"open\", function () {\n        _this4.ready = true;\n        _this4.emit(\"open\");\n        _this4.current_reconnects = 0;\n      });\n      this.socket.addEventListener(\"message\", function (_ref) {\n        var message = _ref.data;\n        if (message instanceof ArrayBuffer) message = Buffer.from(message).toString();\n        try {\n          message = _this4.dataPack.decode(message);\n        } catch (error) {\n          return;\n        }\n        // check if any listeners are attached and forward event\n        if (message.notification && _this4.listeners(message.notification).length) {\n          if (!Object.keys(message.params).length) return _this4.emit(message.notification);\n          var args = [message.notification];\n          if (message.params.constructor === Object) args.push(message.params);else\n            // using for-loop instead of unshift/spread because performance is better\n            for (var i = 0; i < message.params.length; i++) args.push(message.params[i]);\n          // run as microtask so that pending queue messages are resolved first\n          // eslint-disable-next-line prefer-spread\n          return Promise.resolve().then(function () {\n            _this4.emit.apply(_this4, args);\n          });\n        }\n        if (!_this4.queue[message.id]) {\n          // general JSON RPC 2.0 events\n          if (message.method) {\n            // run as microtask so that pending queue messages are resolved first\n            return Promise.resolve().then(function () {\n              _this4.emit(message.method, message === null || message === void 0 ? void 0 : message.params);\n            });\n          }\n          return;\n        }\n        // reject early since server's response is invalid\n        if (\"error\" in message === \"result\" in message) _this4.queue[message.id].promise[1](new Error(\"Server response malformed. Response must include either \\\"result\\\"\" + \" or \\\"error\\\", but not both.\"));\n        if (_this4.queue[message.id].timeout) clearTimeout(_this4.queue[message.id].timeout);\n        if (message.error) _this4.queue[message.id].promise[1](message.error);else _this4.queue[message.id].promise[0](message.result);\n        delete _this4.queue[message.id];\n      });\n      this.socket.addEventListener(\"error\", function (error) {\n        return _this4.emit(\"error\", error);\n      });\n      this.socket.addEventListener(\"close\", function (_ref2) {\n        var code = _ref2.code,\n          reason = _ref2.reason;\n        if (_this4.ready)\n          // Delay close event until internal state is updated\n          setTimeout(function () {\n            return _this4.emit(\"close\", code, reason);\n          }, 0);\n        _this4.ready = false;\n        _this4.socket = undefined;\n        if (code === 1000) return;\n        _this4.current_reconnects++;\n        if (_this4.reconnect && (_this4.max_reconnects > _this4.current_reconnects || _this4.max_reconnects === 0)) _this4.reconnect_timer_id = setTimeout(function () {\n          return _this4._connect(address, options);\n        }, _this4.reconnect_interval);\n      });\n    }\n  }]);\n}(_eventemitter.EventEmitter);","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_regenerator","_asyncToGenerator2","_typeof2","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf2","_inherits2","_eventemitter","_utils","_callSuper","t","o","e","_isNativeReflectConstruct","Reflect","construct","constructor","apply","Boolean","prototype","valueOf","call","__rest","s","p","hasOwnProperty","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","CommonClient","_EventEmitter","webSocketFactory","_this","address","arguments","undefined","_a","generate_request_id","dataPack","_a$autoconnect","autoconnect","_a$reconnect","reconnect","_a$reconnect_interval","reconnect_interval","_a$max_reconnects","max_reconnects","rest_options","queue","rpc_id","ready","reconnect_timer_id","current_reconnects","DefaultDataPack","_connect","assign","key","connect","socket","method","params","timeout","ws_opts","_this2","Promise","resolve","reject","Error","message","jsonrpc","id","send","encode","error","promise","setTimeout","_login","mark","_callee","resp","wrap","_callee$","_context","prev","next","sent","abrupt","stop","login","_x","_listMethods","_callee2","_callee2$","_context2","listMethods","notify","_this3","_subscribe","_callee3","event","result","_callee3$","_context3","subscribe","_x2","_unsubscribe","_callee4","_callee4$","_context4","unsubscribe","_x3","close","code","data","setAutoReconnect","setReconnectInterval","interval","setMaxReconnects","options","_this4","clearTimeout","addEventListener","emit","_ref","ArrayBuffer","Buffer","from","toString","decode","notification","listeners","keys","args","push","then","_ref2","reason","EventEmitter"],"sources":["/home/ryoitsu/Documents/test/react-todo-app/node_modules/rpc-websockets/dist/lib/client.js"],"sourcesContent":["/**\n * \"Client\" wraps \"ws\" or a browser-implemented \"WebSocket\" library\n * according to the environment providing JSON RPC 2.0 support on top.\n * @module Client\n */\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\nvar _eventemitter = require(\"eventemitter3\");\nvar _utils = require(\"./utils\");\nfunction _callSuper(t, o, e) { return o = (0, _getPrototypeOf2[\"default\"])(o), (0, _possibleConstructorReturn2[\"default\"])(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], (0, _getPrototypeOf2[\"default\"])(t).constructor) : o.apply(t, e)); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nvar __rest = void 0 && (void 0).__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n// @ts-ignore\nvar CommonClient = exports[\"default\"] = /*#__PURE__*/function (_EventEmitter) {\n  /**\n   * Instantiate a Client class.\n   * @constructor\n   * @param {webSocketFactory} webSocketFactory - factory method for WebSocket\n   * @param {String} address - url to a websocket server\n   * @param {Object} options - ws options object with reconnect parameters\n   * @param {Function} generate_request_id - custom generation request Id\n   * @param {DataPack} dataPack - data pack contains encoder and decoder\n   * @return {CommonClient}\n   */\n  function CommonClient(webSocketFactory) {\n    var _this;\n    var address = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"ws://localhost:8080\";\n    var _a = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var generate_request_id = arguments.length > 3 ? arguments[3] : undefined;\n    var dataPack = arguments.length > 4 ? arguments[4] : undefined;\n    (0, _classCallCheck2[\"default\"])(this, CommonClient);\n    var _a$autoconnect = _a.autoconnect,\n      autoconnect = _a$autoconnect === void 0 ? true : _a$autoconnect,\n      _a$reconnect = _a.reconnect,\n      reconnect = _a$reconnect === void 0 ? true : _a$reconnect,\n      _a$reconnect_interval = _a.reconnect_interval,\n      reconnect_interval = _a$reconnect_interval === void 0 ? 1000 : _a$reconnect_interval,\n      _a$max_reconnects = _a.max_reconnects,\n      max_reconnects = _a$max_reconnects === void 0 ? 5 : _a$max_reconnects,\n      rest_options = __rest(_a, [\"autoconnect\", \"reconnect\", \"reconnect_interval\", \"max_reconnects\"]);\n    _this = _callSuper(this, CommonClient);\n    _this.webSocketFactory = webSocketFactory;\n    _this.queue = {};\n    _this.rpc_id = 0;\n    _this.address = address;\n    _this.autoconnect = autoconnect;\n    _this.ready = false;\n    _this.reconnect = reconnect;\n    _this.reconnect_timer_id = undefined;\n    _this.reconnect_interval = reconnect_interval;\n    _this.max_reconnects = max_reconnects;\n    _this.rest_options = rest_options;\n    _this.current_reconnects = 0;\n    _this.generate_request_id = generate_request_id || function () {\n      return ++_this.rpc_id;\n    };\n    if (!dataPack) _this.dataPack = new _utils.DefaultDataPack();else _this.dataPack = dataPack;\n    if (_this.autoconnect) _this._connect(_this.address, Object.assign({\n      autoconnect: _this.autoconnect,\n      reconnect: _this.reconnect,\n      reconnect_interval: _this.reconnect_interval,\n      max_reconnects: _this.max_reconnects\n    }, _this.rest_options));\n    return _this;\n  }\n  /**\n   * Connects to a defined server if not connected already.\n   * @method\n   * @return {Undefined}\n   */\n  (0, _inherits2[\"default\"])(CommonClient, _EventEmitter);\n  return (0, _createClass2[\"default\"])(CommonClient, [{\n    key: \"connect\",\n    value: function connect() {\n      if (this.socket) return;\n      this._connect(this.address, Object.assign({\n        autoconnect: this.autoconnect,\n        reconnect: this.reconnect,\n        reconnect_interval: this.reconnect_interval,\n        max_reconnects: this.max_reconnects\n      }, this.rest_options));\n    }\n    /**\n     * Calls a registered RPC method on server.\n     * @method\n     * @param {String} method - RPC method name\n     * @param {Object|Array} params - optional method parameters\n     * @param {Number} timeout - RPC reply timeout value\n     * @param {Object} ws_opts - options passed to ws\n     * @return {Promise}\n     */\n  }, {\n    key: \"call\",\n    value: function call(method, params, timeout, ws_opts) {\n      var _this2 = this;\n      if (!ws_opts && \"object\" === (0, _typeof2[\"default\"])(timeout)) {\n        ws_opts = timeout;\n        timeout = null;\n      }\n      return new Promise(function (resolve, reject) {\n        if (!_this2.ready) return reject(new Error(\"socket not ready\"));\n        var rpc_id = _this2.generate_request_id(method, params);\n        var message = {\n          jsonrpc: \"2.0\",\n          method: method,\n          params: params || undefined,\n          id: rpc_id\n        };\n        _this2.socket.send(_this2.dataPack.encode(message), ws_opts, function (error) {\n          if (error) return reject(error);\n          _this2.queue[rpc_id] = {\n            promise: [resolve, reject]\n          };\n          if (timeout) {\n            _this2.queue[rpc_id].timeout = setTimeout(function () {\n              delete _this2.queue[rpc_id];\n              reject(new Error(\"reply timeout\"));\n            }, timeout);\n          }\n        });\n      });\n    }\n    /**\n     * Logins with the other side of the connection.\n     * @method\n     * @param {Object} params - Login credentials object\n     * @return {Promise}\n     */\n  }, {\n    key: \"login\",\n    value: (function () {\n      var _login = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(params) {\n        var resp;\n        return _regenerator[\"default\"].wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this.call(\"rpc.login\", params);\n            case 2:\n              resp = _context.sent;\n              if (resp) {\n                _context.next = 5;\n                break;\n              }\n              throw new Error(\"authentication failed\");\n            case 5:\n              return _context.abrupt(\"return\", resp);\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function login(_x) {\n        return _login.apply(this, arguments);\n      }\n      return login;\n    }()\n    /**\n     * Fetches a list of client's methods registered on server.\n     * @method\n     * @return {Array}\n     */\n    )\n  }, {\n    key: \"listMethods\",\n    value: (function () {\n      var _listMethods = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2() {\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return this.call(\"__listMethods\");\n            case 2:\n              return _context2.abrupt(\"return\", _context2.sent);\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function listMethods() {\n        return _listMethods.apply(this, arguments);\n      }\n      return listMethods;\n    }()\n    /**\n     * Sends a JSON-RPC 2.0 notification to server.\n     * @method\n     * @param {String} method - RPC method name\n     * @param {Object} params - optional method parameters\n     * @return {Promise}\n     */\n    )\n  }, {\n    key: \"notify\",\n    value: function notify(method, params) {\n      var _this3 = this;\n      return new Promise(function (resolve, reject) {\n        if (!_this3.ready) return reject(new Error(\"socket not ready\"));\n        var message = {\n          jsonrpc: \"2.0\",\n          method: method,\n          params: params\n        };\n        _this3.socket.send(_this3.dataPack.encode(message), function (error) {\n          if (error) return reject(error);\n          resolve();\n        });\n      });\n    }\n    /**\n     * Subscribes for a defined event.\n     * @method\n     * @param {String|Array} event - event name\n     * @return {Undefined}\n     * @throws {Error}\n     */\n  }, {\n    key: \"subscribe\",\n    value: (function () {\n      var _subscribe = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(event) {\n        var result;\n        return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              if (typeof event === \"string\") event = [event];\n              _context3.next = 3;\n              return this.call(\"rpc.on\", event);\n            case 3:\n              result = _context3.sent;\n              if (!(typeof event === \"string\" && result[event] !== \"ok\")) {\n                _context3.next = 6;\n                break;\n              }\n              throw new Error(\"Failed subscribing to an event '\" + event + \"' with: \" + result[event]);\n            case 6:\n              return _context3.abrupt(\"return\", result);\n            case 7:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function subscribe(_x2) {\n        return _subscribe.apply(this, arguments);\n      }\n      return subscribe;\n    }()\n    /**\n     * Unsubscribes from a defined event.\n     * @method\n     * @param {String|Array} event - event name\n     * @return {Undefined}\n     * @throws {Error}\n     */\n    )\n  }, {\n    key: \"unsubscribe\",\n    value: (function () {\n      var _unsubscribe = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(event) {\n        var result;\n        return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              if (typeof event === \"string\") event = [event];\n              _context4.next = 3;\n              return this.call(\"rpc.off\", event);\n            case 3:\n              result = _context4.sent;\n              if (!(typeof event === \"string\" && result[event] !== \"ok\")) {\n                _context4.next = 6;\n                break;\n              }\n              throw new Error(\"Failed unsubscribing from an event with: \" + result);\n            case 6:\n              return _context4.abrupt(\"return\", result);\n            case 7:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this);\n      }));\n      function unsubscribe(_x3) {\n        return _unsubscribe.apply(this, arguments);\n      }\n      return unsubscribe;\n    }()\n    /**\n     * Closes a WebSocket connection gracefully.\n     * @method\n     * @param {Number} code - socket close code\n     * @param {String} data - optional data to be sent before closing\n     * @return {Undefined}\n     */\n    )\n  }, {\n    key: \"close\",\n    value: function close(code, data) {\n      this.socket.close(code || 1000, data);\n    }\n    /**\n     * Enable / disable automatic reconnection.\n     * @method\n     * @param {Boolean} reconnect - enable / disable reconnection\n     * @return {Undefined}\n     */\n  }, {\n    key: \"setAutoReconnect\",\n    value: function setAutoReconnect(reconnect) {\n      this.reconnect = reconnect;\n    }\n    /**\n     * Set the interval between reconnection attempts.\n     * @method\n     * @param {Number} interval - reconnection interval in milliseconds\n     * @return {Undefined}\n     */\n  }, {\n    key: \"setReconnectInterval\",\n    value: function setReconnectInterval(interval) {\n      this.reconnect_interval = interval;\n    }\n    /**\n     * Set the maximum number of reconnection attempts.\n     * @method\n     * @param {Number} max_reconnects - maximum reconnection attempts\n     * @return {Undefined}\n     */\n  }, {\n    key: \"setMaxReconnects\",\n    value: function setMaxReconnects(max_reconnects) {\n      this.max_reconnects = max_reconnects;\n    }\n    /**\n     * Connection/Message handler.\n     * @method\n     * @private\n     * @param {String} address - WebSocket API address\n     * @param {Object} options - ws options object\n     * @return {Undefined}\n     */\n  }, {\n    key: \"_connect\",\n    value: function _connect(address, options) {\n      var _this4 = this;\n      clearTimeout(this.reconnect_timer_id);\n      this.socket = this.webSocketFactory(address, options);\n      this.socket.addEventListener(\"open\", function () {\n        _this4.ready = true;\n        _this4.emit(\"open\");\n        _this4.current_reconnects = 0;\n      });\n      this.socket.addEventListener(\"message\", function (_ref) {\n        var message = _ref.data;\n        if (message instanceof ArrayBuffer) message = Buffer.from(message).toString();\n        try {\n          message = _this4.dataPack.decode(message);\n        } catch (error) {\n          return;\n        }\n        // check if any listeners are attached and forward event\n        if (message.notification && _this4.listeners(message.notification).length) {\n          if (!Object.keys(message.params).length) return _this4.emit(message.notification);\n          var args = [message.notification];\n          if (message.params.constructor === Object) args.push(message.params);else\n            // using for-loop instead of unshift/spread because performance is better\n            for (var i = 0; i < message.params.length; i++) args.push(message.params[i]);\n          // run as microtask so that pending queue messages are resolved first\n          // eslint-disable-next-line prefer-spread\n          return Promise.resolve().then(function () {\n            _this4.emit.apply(_this4, args);\n          });\n        }\n        if (!_this4.queue[message.id]) {\n          // general JSON RPC 2.0 events\n          if (message.method) {\n            // run as microtask so that pending queue messages are resolved first\n            return Promise.resolve().then(function () {\n              _this4.emit(message.method, message === null || message === void 0 ? void 0 : message.params);\n            });\n          }\n          return;\n        }\n        // reject early since server's response is invalid\n        if (\"error\" in message === \"result\" in message) _this4.queue[message.id].promise[1](new Error(\"Server response malformed. Response must include either \\\"result\\\"\" + \" or \\\"error\\\", but not both.\"));\n        if (_this4.queue[message.id].timeout) clearTimeout(_this4.queue[message.id].timeout);\n        if (message.error) _this4.queue[message.id].promise[1](message.error);else _this4.queue[message.id].promise[0](message.result);\n        delete _this4.queue[message.id];\n      });\n      this.socket.addEventListener(\"error\", function (error) {\n        return _this4.emit(\"error\", error);\n      });\n      this.socket.addEventListener(\"close\", function (_ref2) {\n        var code = _ref2.code,\n          reason = _ref2.reason;\n        if (_this4.ready)\n          // Delay close event until internal state is updated\n          setTimeout(function () {\n            return _this4.emit(\"close\", code, reason);\n          }, 0);\n        _this4.ready = false;\n        _this4.socket = undefined;\n        if (code === 1000) return;\n        _this4.current_reconnects++;\n        if (_this4.reconnect && (_this4.max_reconnects > _this4.current_reconnects || _this4.max_reconnects === 0)) _this4.reconnect_timer_id = setTimeout(function () {\n          return _this4._connect(address, options);\n        }, _this4.reconnect_interval);\n      });\n    }\n  }]);\n}(_eventemitter.EventEmitter);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}