{"ast":null,"code":"import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { memo } from '../util/index.js';\nimport { filterBountiesProposals } from './helpers/filterBountyProposals.js';\nfunction parseResult(_ref) {\n  let [maybeBounties, maybeDescriptions, ids, bountyProposals] = _ref;\n  const bounties = [];\n  maybeBounties.forEach((bounty, index) => {\n    if (bounty.isSome) {\n      bounties.push({\n        bounty: bounty.unwrap(),\n        description: maybeDescriptions[index].unwrapOrDefault().toUtf8(),\n        index: ids[index],\n        proposals: bountyProposals.filter(bountyProposal => bountyProposal.proposal && ids[index].eq(bountyProposal.proposal.args[0]))\n      });\n    }\n  });\n  return bounties;\n}\nexport function bounties(instanceId, api) {\n  const bountyBase = api.query.bounties || api.query.treasury;\n  return memo(instanceId, () => bountyBase.bounties ? combineLatest([bountyBase.bountyCount(), api.query.council ? api.query.council.proposalCount() : of(0)]).pipe(switchMap(() => combineLatest([bountyBase.bounties.keys(), api.derive.council ? api.derive.council.proposals() : of([])])), switchMap(_ref2 => {\n    let [keys, proposals] = _ref2;\n    const ids = keys.map(_ref3 => {\n      let {\n        args: [id]\n      } = _ref3;\n      return id;\n    });\n    return combineLatest([bountyBase.bounties.multi(ids), bountyBase.bountyDescriptions.multi(ids), of(ids), of(filterBountiesProposals(api, proposals))]);\n  }), map(parseResult)) : of(parseResult([[], [], [], []])));\n}","map":{"version":3,"names":["combineLatest","map","of","switchMap","memo","filterBountiesProposals","parseResult","_ref","maybeBounties","maybeDescriptions","ids","bountyProposals","bounties","forEach","bounty","index","isSome","push","unwrap","description","unwrapOrDefault","toUtf8","proposals","filter","bountyProposal","proposal","eq","args","instanceId","api","bountyBase","query","treasury","bountyCount","council","proposalCount","pipe","keys","derive","_ref2","_ref3","id","multi","bountyDescriptions"],"sources":["/home/ryoitsu/Documents/test/react-todo-app/node_modules/@polkadot/api-derive/bounties/bounties.js"],"sourcesContent":["import { combineLatest, map, of, switchMap } from 'rxjs';\nimport { memo } from '../util/index.js';\nimport { filterBountiesProposals } from './helpers/filterBountyProposals.js';\nfunction parseResult([maybeBounties, maybeDescriptions, ids, bountyProposals]) {\n    const bounties = [];\n    maybeBounties.forEach((bounty, index) => {\n        if (bounty.isSome) {\n            bounties.push({\n                bounty: bounty.unwrap(),\n                description: maybeDescriptions[index].unwrapOrDefault().toUtf8(),\n                index: ids[index],\n                proposals: bountyProposals.filter((bountyProposal) => bountyProposal.proposal && ids[index].eq(bountyProposal.proposal.args[0]))\n            });\n        }\n    });\n    return bounties;\n}\nexport function bounties(instanceId, api) {\n    const bountyBase = api.query.bounties || api.query.treasury;\n    return memo(instanceId, () => bountyBase.bounties\n        ? combineLatest([\n            bountyBase.bountyCount(),\n            api.query.council\n                ? api.query.council.proposalCount()\n                : of(0)\n        ]).pipe(switchMap(() => combineLatest([\n            bountyBase.bounties.keys(),\n            api.derive.council\n                ? api.derive.council.proposals()\n                : of([])\n        ])), switchMap(([keys, proposals]) => {\n            const ids = keys.map(({ args: [id] }) => id);\n            return combineLatest([\n                bountyBase.bounties.multi(ids),\n                bountyBase.bountyDescriptions.multi(ids),\n                of(ids),\n                of(filterBountiesProposals(api, proposals))\n            ]);\n        }), map(parseResult))\n        : of(parseResult([[], [], [], []])));\n}\n"],"mappings":"AAAA,SAASA,aAAa,EAAEC,GAAG,EAAEC,EAAE,EAAEC,SAAS,QAAQ,MAAM;AACxD,SAASC,IAAI,QAAQ,kBAAkB;AACvC,SAASC,uBAAuB,QAAQ,oCAAoC;AAC5E,SAASC,WAAWA,CAAAC,IAAA,EAA2D;EAAA,IAA1D,CAACC,aAAa,EAAEC,iBAAiB,EAAEC,GAAG,EAAEC,eAAe,CAAC,GAAAJ,IAAA;EACzE,MAAMK,QAAQ,GAAG,EAAE;EACnBJ,aAAa,CAACK,OAAO,CAAC,CAACC,MAAM,EAAEC,KAAK,KAAK;IACrC,IAAID,MAAM,CAACE,MAAM,EAAE;MACfJ,QAAQ,CAACK,IAAI,CAAC;QACVH,MAAM,EAAEA,MAAM,CAACI,MAAM,CAAC,CAAC;QACvBC,WAAW,EAAEV,iBAAiB,CAACM,KAAK,CAAC,CAACK,eAAe,CAAC,CAAC,CAACC,MAAM,CAAC,CAAC;QAChEN,KAAK,EAAEL,GAAG,CAACK,KAAK,CAAC;QACjBO,SAAS,EAAEX,eAAe,CAACY,MAAM,CAAEC,cAAc,IAAKA,cAAc,CAACC,QAAQ,IAAIf,GAAG,CAACK,KAAK,CAAC,CAACW,EAAE,CAACF,cAAc,CAACC,QAAQ,CAACE,IAAI,CAAC,CAAC,CAAC,CAAC;MACnI,CAAC,CAAC;IACN;EACJ,CAAC,CAAC;EACF,OAAOf,QAAQ;AACnB;AACA,OAAO,SAASA,QAAQA,CAACgB,UAAU,EAAEC,GAAG,EAAE;EACtC,MAAMC,UAAU,GAAGD,GAAG,CAACE,KAAK,CAACnB,QAAQ,IAAIiB,GAAG,CAACE,KAAK,CAACC,QAAQ;EAC3D,OAAO5B,IAAI,CAACwB,UAAU,EAAE,MAAME,UAAU,CAAClB,QAAQ,GAC3CZ,aAAa,CAAC,CACZ8B,UAAU,CAACG,WAAW,CAAC,CAAC,EACxBJ,GAAG,CAACE,KAAK,CAACG,OAAO,GACXL,GAAG,CAACE,KAAK,CAACG,OAAO,CAACC,aAAa,CAAC,CAAC,GACjCjC,EAAE,CAAC,CAAC,CAAC,CACd,CAAC,CAACkC,IAAI,CAACjC,SAAS,CAAC,MAAMH,aAAa,CAAC,CAClC8B,UAAU,CAAClB,QAAQ,CAACyB,IAAI,CAAC,CAAC,EAC1BR,GAAG,CAACS,MAAM,CAACJ,OAAO,GACZL,GAAG,CAACS,MAAM,CAACJ,OAAO,CAACZ,SAAS,CAAC,CAAC,GAC9BpB,EAAE,CAAC,EAAE,CAAC,CACf,CAAC,CAAC,EAAEC,SAAS,CAACoC,KAAA,IAAuB;IAAA,IAAtB,CAACF,IAAI,EAAEf,SAAS,CAAC,GAAAiB,KAAA;IAC7B,MAAM7B,GAAG,GAAG2B,IAAI,CAACpC,GAAG,CAACuC,KAAA;MAAA,IAAC;QAAEb,IAAI,EAAE,CAACc,EAAE;MAAE,CAAC,GAAAD,KAAA;MAAA,OAAKC,EAAE;IAAA,EAAC;IAC5C,OAAOzC,aAAa,CAAC,CACjB8B,UAAU,CAAClB,QAAQ,CAAC8B,KAAK,CAAChC,GAAG,CAAC,EAC9BoB,UAAU,CAACa,kBAAkB,CAACD,KAAK,CAAChC,GAAG,CAAC,EACxCR,EAAE,CAACQ,GAAG,CAAC,EACPR,EAAE,CAACG,uBAAuB,CAACwB,GAAG,EAAEP,SAAS,CAAC,CAAC,CAC9C,CAAC;EACN,CAAC,CAAC,EAAErB,GAAG,CAACK,WAAW,CAAC,CAAC,GACnBJ,EAAE,CAACI,WAAW,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;AAC5C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}