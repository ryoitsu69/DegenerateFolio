{"ast":null,"code":"import { Buffer } from 'buffer';\nimport JSONRequest from '../jsonrequest';\nimport { concatArrays } from '../../../utils/utils';\n/**\n * Sets the default header (if not previously set) for sending a raw\n * transaction.\n * @param headers - A headers object\n */\nexport function setSendTransactionHeaders() {\n  let headers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let hdrs = headers;\n  if (Object.keys(hdrs).every(key => key.toLowerCase() !== 'content-type')) {\n    hdrs = {\n      ...headers\n    };\n    hdrs['Content-Type'] = 'application/x-binary';\n  }\n  return hdrs;\n}\nfunction isByteArray(array) {\n  return array && array.byteLength !== undefined;\n}\n/**\n * broadcasts the passed signed txns to the network\n */\nexport default class SendRawTransaction extends JSONRequest {\n  constructor(c, stxOrStxs) {\n    super(c);\n    let forPosting = stxOrStxs;\n    if (Array.isArray(stxOrStxs)) {\n      if (!stxOrStxs.every(isByteArray)) {\n        throw new TypeError('Array elements must be byte arrays');\n      }\n      // Flatten into a single Uint8Array\n      forPosting = concatArrays(...stxOrStxs);\n    } else if (!isByteArray(forPosting)) {\n      throw new TypeError('Argument must be byte array');\n    }\n    this.txnBytesToPost = forPosting;\n  }\n  // eslint-disable-next-line class-methods-use-this\n  path() {\n    return '/v2/transactions';\n  }\n  async do() {\n    let headers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const txHeaders = setSendTransactionHeaders(headers);\n    const res = await this.c.post(this.path(), Buffer.from(this.txnBytesToPost), txHeaders);\n    return res.body;\n  }\n}","map":{"version":3,"names":["Buffer","JSONRequest","concatArrays","setSendTransactionHeaders","headers","arguments","length","undefined","hdrs","Object","keys","every","key","toLowerCase","isByteArray","array","byteLength","SendRawTransaction","constructor","c","stxOrStxs","forPosting","Array","isArray","TypeError","txnBytesToPost","path","do","txHeaders","res","post","from","body"],"sources":["/home/ryoitsu/Documents/test/react-todo-app/node_modules/algosdk/src/client/v2/algod/sendRawTransaction.ts"],"sourcesContent":["import { Buffer } from 'buffer';\nimport JSONRequest from '../jsonrequest';\nimport HTTPClient from '../../client';\nimport { concatArrays } from '../../../utils/utils';\n\n/**\n * Sets the default header (if not previously set) for sending a raw\n * transaction.\n * @param headers - A headers object\n */\nexport function setSendTransactionHeaders(headers = {}) {\n  let hdrs = headers;\n  if (Object.keys(hdrs).every((key) => key.toLowerCase() !== 'content-type')) {\n    hdrs = { ...headers };\n    hdrs['Content-Type'] = 'application/x-binary';\n  }\n  return hdrs;\n}\n\nfunction isByteArray(array: any): array is Uint8Array {\n  return array && array.byteLength !== undefined;\n}\n\n/**\n * broadcasts the passed signed txns to the network\n */\nexport default class SendRawTransaction extends JSONRequest {\n  private txnBytesToPost: Uint8Array;\n\n  constructor(c: HTTPClient, stxOrStxs: Uint8Array | Uint8Array[]) {\n    super(c);\n\n    let forPosting = stxOrStxs;\n    if (Array.isArray(stxOrStxs)) {\n      if (!stxOrStxs.every(isByteArray)) {\n        throw new TypeError('Array elements must be byte arrays');\n      }\n      // Flatten into a single Uint8Array\n      forPosting = concatArrays(...stxOrStxs);\n    } else if (!isByteArray(forPosting)) {\n      throw new TypeError('Argument must be byte array');\n    }\n    this.txnBytesToPost = forPosting;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  path() {\n    return '/v2/transactions';\n  }\n\n  async do(headers = {}) {\n    const txHeaders = setSendTransactionHeaders(headers);\n    const res = await this.c.post(\n      this.path(),\n      Buffer.from(this.txnBytesToPost),\n      txHeaders\n    );\n    return res.body;\n  }\n}\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,QAAQ;AAC/B,OAAOC,WAAW,MAAM,gBAAgB;AAExC,SAASC,YAAY,QAAQ,sBAAsB;AAEnD;;;;;AAKA,OAAM,SAAUC,yBAAyBA,CAAA,EAAa;EAAA,IAAZC,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;EACpD,IAAIG,IAAI,GAAGJ,OAAO;EAClB,IAAIK,MAAM,CAACC,IAAI,CAACF,IAAI,CAAC,CAACG,KAAK,CAAEC,GAAG,IAAKA,GAAG,CAACC,WAAW,EAAE,KAAK,cAAc,CAAC,EAAE;IAC1EL,IAAI,GAAG;MAAE,GAAGJ;IAAO,CAAE;IACrBI,IAAI,CAAC,cAAc,CAAC,GAAG,sBAAsB;;EAE/C,OAAOA,IAAI;AACb;AAEA,SAASM,WAAWA,CAACC,KAAU;EAC7B,OAAOA,KAAK,IAAIA,KAAK,CAACC,UAAU,KAAKT,SAAS;AAChD;AAEA;;;AAGA,eAAc,MAAOU,kBAAmB,SAAQhB,WAAW;EAGzDiB,YAAYC,CAAa,EAAEC,SAAoC;IAC7D,KAAK,CAACD,CAAC,CAAC;IAER,IAAIE,UAAU,GAAGD,SAAS;IAC1B,IAAIE,KAAK,CAACC,OAAO,CAACH,SAAS,CAAC,EAAE;MAC5B,IAAI,CAACA,SAAS,CAACT,KAAK,CAACG,WAAW,CAAC,EAAE;QACjC,MAAM,IAAIU,SAAS,CAAC,oCAAoC,CAAC;;MAE3D;MACAH,UAAU,GAAGnB,YAAY,CAAC,GAAGkB,SAAS,CAAC;KACxC,MAAM,IAAI,CAACN,WAAW,CAACO,UAAU,CAAC,EAAE;MACnC,MAAM,IAAIG,SAAS,CAAC,6BAA6B,CAAC;;IAEpD,IAAI,CAACC,cAAc,GAAGJ,UAAU;EAClC;EAEA;EACAK,IAAIA,CAAA;IACF,OAAO,kBAAkB;EAC3B;EAEA,MAAMC,EAAEA,CAAA,EAAa;IAAA,IAAZvB,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,EAAE;IACnB,MAAMuB,SAAS,GAAGzB,yBAAyB,CAACC,OAAO,CAAC;IACpD,MAAMyB,GAAG,GAAG,MAAM,IAAI,CAACV,CAAC,CAACW,IAAI,CAC3B,IAAI,CAACJ,IAAI,EAAE,EACX1B,MAAM,CAAC+B,IAAI,CAAC,IAAI,CAACN,cAAc,CAAC,EAChCG,SAAS,CACV;IACD,OAAOC,GAAG,CAACG,IAAI;EACjB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}