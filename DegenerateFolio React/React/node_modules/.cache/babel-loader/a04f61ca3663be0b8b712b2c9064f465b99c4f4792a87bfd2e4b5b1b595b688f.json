{"ast":null,"code":"import { ExtensionType } from '../extensions/Extensions.mjs';\n\"use strict\";\nclass ResizePlugin {\n  /**\n   * Initialize the plugin with scope of application instance\n   * @static\n   * @private\n   * @param {object} [options] - See application options\n   */\n  static init(options) {\n    Object.defineProperty(this, \"resizeTo\",\n    /**\n     * The HTML element or window to automatically resize the\n     * renderer's view element to match width and height.\n     * @member {Window|HTMLElement}\n     * @name resizeTo\n     * @memberof app.Application#\n     */\n    {\n      set(dom) {\n        globalThis.removeEventListener(\"resize\", this.queueResize);\n        this._resizeTo = dom;\n        if (dom) {\n          globalThis.addEventListener(\"resize\", this.queueResize);\n          this.resize();\n        }\n      },\n      get() {\n        return this._resizeTo;\n      }\n    });\n    this.queueResize = () => {\n      if (!this._resizeTo) {\n        return;\n      }\n      this._cancelResize();\n      this._resizeId = requestAnimationFrame(() => this.resize());\n    };\n    this._cancelResize = () => {\n      if (this._resizeId) {\n        cancelAnimationFrame(this._resizeId);\n        this._resizeId = null;\n      }\n    };\n    this.resize = () => {\n      if (!this._resizeTo) {\n        return;\n      }\n      this._cancelResize();\n      let width;\n      let height;\n      if (this._resizeTo === globalThis.window) {\n        width = globalThis.innerWidth;\n        height = globalThis.innerHeight;\n      } else {\n        const {\n          clientWidth,\n          clientHeight\n        } = this._resizeTo;\n        width = clientWidth;\n        height = clientHeight;\n      }\n      this.renderer.resize(width, height);\n      this.render();\n    };\n    this._resizeId = null;\n    this._resizeTo = null;\n    this.resizeTo = options.resizeTo || null;\n  }\n  /**\n   * Clean up the ticker, scoped to application\n   * @static\n   * @private\n   */\n  static destroy() {\n    globalThis.removeEventListener(\"resize\", this.queueResize);\n    this._cancelResize();\n    this._cancelResize = null;\n    this.queueResize = null;\n    this.resizeTo = null;\n    this.resize = null;\n  }\n}\n/** @ignore */\nResizePlugin.extension = ExtensionType.Application;\nexport { ResizePlugin };","map":{"version":3,"names":["ResizePlugin","init","options","Object","defineProperty","set","dom","globalThis","removeEventListener","queueResize","_resizeTo","addEventListener","resize","get","_cancelResize","_resizeId","requestAnimationFrame","cancelAnimationFrame","width","height","window","innerWidth","innerHeight","clientWidth","clientHeight","renderer","render","resizeTo","destroy","extension","ExtensionType","Application"],"sources":["/home/ryoitsu/node_modules/pixi.js/src/app/ResizePlugin.ts"],"sourcesContent":["import { ExtensionType } from '../extensions/Extensions';\n\nimport type { ExtensionMetadata } from '../extensions/Extensions';\nimport type { Renderer } from '../rendering/renderers/types';\n\ntype ResizeableRenderer = Pick<Renderer, 'resize'>;\n\n/**\n * Application options for the {@link app.ResizePlugin}.\n * @memberof app\n * @property {Window|HTMLElement} [resizeTo=window] - Element to automatically resize the renderer to.\n */\nexport interface ResizePluginOptions\n{\n    /**\n     * Element to automatically resize the renderer to.\n     * @memberof app.ApplicationOptions\n     */\n    resizeTo?: Window | HTMLElement;\n}\n\n/**\n * Middleware for Application's resize functionality.\n *\n * Adds the following methods to {@link app.Application}:\n * * {@link app.Application#resizeTo}\n * * {@link app.Application#resize}\n * * {@link app.Application#queueResize}\n * * {@link app.Application#cancelResize}\n * @example\n * import { extensions, ResizePlugin } from 'pixi.js';\n *\n * extensions.add(ResizePlugin);\n * @memberof app\n */\nexport class ResizePlugin\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = ExtensionType.Application;\n\n    public static resizeTo: Window | HTMLElement;\n    public static resize: () => void;\n    public static renderer: ResizeableRenderer;\n    public static queueResize: () => void;\n    public static render: () => void;\n    private static _resizeId: number;\n    private static _resizeTo: Window | HTMLElement;\n    private static _cancelResize: () => void;\n\n    /**\n     * Initialize the plugin with scope of application instance\n     * @static\n     * @private\n     * @param {object} [options] - See application options\n     */\n    public static init(options: ResizePluginOptions): void\n    {\n        Object.defineProperty(this, 'resizeTo',\n            /**\n             * The HTML element or window to automatically resize the\n             * renderer's view element to match width and height.\n             * @member {Window|HTMLElement}\n             * @name resizeTo\n             * @memberof app.Application#\n             */\n            {\n                set(dom: Window | HTMLElement)\n                {\n                    globalThis.removeEventListener('resize', this.queueResize);\n                    this._resizeTo = dom;\n                    if (dom)\n                    {\n                        globalThis.addEventListener('resize', this.queueResize);\n                        this.resize();\n                    }\n                },\n                get()\n                {\n                    return this._resizeTo;\n                },\n            });\n\n        /**\n         * Resize is throttled, so it's safe to call this multiple times per frame and it'll\n         * only be called once.\n         * @memberof app.Application#\n         * @method queueResize\n         * @private\n         */\n        this.queueResize = (): void =>\n        {\n            if (!this._resizeTo)\n            {\n                return;\n            }\n\n            this._cancelResize();\n\n            // // Throttle resize events per raf\n            this._resizeId = requestAnimationFrame(() => this.resize());\n        };\n\n        /**\n         * Cancel the resize queue.\n         * @memberof app.Application#\n         * @method cancelResize\n         * @private\n         */\n        this._cancelResize = (): void =>\n        {\n            if (this._resizeId)\n            {\n                cancelAnimationFrame(this._resizeId);\n                this._resizeId = null;\n            }\n        };\n\n        /**\n         * Execute an immediate resize on the renderer, this is not\n         * throttled and can be expensive to call many times in a row.\n         * Will resize only if `resizeTo` property is set.\n         * @memberof app.Application#\n         * @method resize\n         */\n        this.resize = (): void =>\n        {\n            if (!this._resizeTo)\n            {\n                return;\n            }\n\n            // clear queue resize\n            this._cancelResize();\n\n            let width: number;\n            let height: number;\n\n            // Resize to the window\n            if (this._resizeTo === globalThis.window)\n            {\n                width = globalThis.innerWidth;\n                height = globalThis.innerHeight;\n            }\n            // Resize to other HTML entities\n            else\n            {\n                const { clientWidth, clientHeight } = this._resizeTo as HTMLElement;\n\n                width = clientWidth;\n                height = clientHeight;\n            }\n\n            this.renderer.resize(width, height);\n            this.render();\n        };\n\n        // On resize\n        this._resizeId = null;\n        this._resizeTo = null;\n        this.resizeTo = options.resizeTo || null;\n    }\n\n    /**\n     * Clean up the ticker, scoped to application\n     * @static\n     * @private\n     */\n    public static destroy(): void\n    {\n        globalThis.removeEventListener('resize', this.queueResize);\n        this._cancelResize();\n        this._cancelResize = null;\n        this.queueResize = null;\n        this.resizeTo = null;\n        this.resize = null;\n    }\n}\n"],"mappings":";;AAmCO,MAAMA,YACb;EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;EAmBI,OAAcC,KAAKC,OACnB;IACWC,MAAA,CAAAC,cAAA,CAAe,MAAM;IAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;IAQxB;MACIC,IAAIC,GACJ;QACeC,UAAA,CAAAC,mBAAA,CAAoB,QAAU,OAAKC,WAAW;QACzD,KAAKC,SAAY,GAAAJ,GAAA;QACjB,IAAIA,GACJ;UACeC,UAAA,CAAAI,gBAAA,CAAiB,QAAU,OAAKF,WAAW;UACtD,KAAKG,MAAO;QAAA;MAChB,CACJ;MACAC,GACAA,CAAA;QACI,OAAO,IAAK,CAAAH,SAAA;MAAA;IAChB,CACJ,CAAC;IASL,KAAKD,WAAA,GAAc,MACnB;MACQ,KAAC,KAAKC,SACV;QACI;MAAA;MAGJ,KAAKI,aAAc;MAGnB,KAAKC,SAAY,GAAAC,qBAAA,CAAsB,MAAM,KAAKJ,MAAA,EAAQ;IAAA,CAC9D;IAQA,KAAKE,aAAA,GAAgB,MACrB;MACI,IAAI,KAAKC,SACT;QACIE,oBAAA,CAAqB,KAAKF,SAAS;QACnC,KAAKA,SAAY;MAAA;IACrB,CACJ;IASA,KAAKH,MAAA,GAAS,MACd;MACQ,KAAC,KAAKF,SACV;QACI;MAAA;MAIJ,KAAKI,aAAc;MAEf,IAAAI,KAAA;MACA,IAAAC,MAAA;MAGA,SAAKT,SAAc,KAAAH,UAAA,CAAWa,MAClC;QACIF,KAAA,GAAQX,UAAW,CAAAc,UAAA;QACnBF,MAAA,GAASZ,UAAW,CAAAe,WAAA;MAAA,CAIxB;QACI,MAAM;UAAEC,WAAA;UAAaC;QAAa,IAAI,IAAK,CAAAd,SAAA;QAEnCQ,KAAA,GAAAK,WAAA;QACCJ,MAAA,GAAAK,YAAA;MAAA;MAGR,KAAAC,QAAA,CAASb,MAAO,CAAAM,KAAA,EAAOC,MAAM;MAClC,KAAKO,MAAO;IAAA,CAChB;IAGA,KAAKX,SAAY;IACjB,KAAKL,SAAY;IACZ,KAAAiB,QAAA,GAAWzB,OAAA,CAAQyB,QAAY;EAAA;EACxC;AAAA;AAAA;AAAA;AAAA;EAOA,OAAcC,OACdA,CAAA;IACerB,UAAA,CAAAC,mBAAA,CAAoB,QAAU,OAAKC,WAAW;IACzD,KAAKK,aAAc;IACnB,KAAKA,aAAgB;IACrB,KAAKL,WAAc;IACnB,KAAKkB,QAAW;IAChB,KAAKf,MAAS;EAAA;AAEtB;AAAA;AA7IaZ,YAAA,CAGK6B,SAAA,GAA+BC,aAAc,CAAAC,WAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}