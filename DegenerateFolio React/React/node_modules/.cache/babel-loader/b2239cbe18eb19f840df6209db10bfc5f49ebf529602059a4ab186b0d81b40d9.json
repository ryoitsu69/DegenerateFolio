{"ast":null,"code":"import { map, switchMap } from 'rxjs';\nimport { arrayFlatten } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nconst DEFAULT_FLAGS = {\n  withController: true,\n  withExposure: true,\n  withPrefs: true\n};\nfunction combineAccounts(nextElected, validators) {\n  return arrayFlatten([nextElected, validators.filter(v => !nextElected.find(n => n.eq(v)))]);\n}\nexport function electedInfo(instanceId, api) {\n  return memo(instanceId, function () {\n    let flags = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_FLAGS;\n    return api.derive.staking.validators().pipe(switchMap(_ref => {\n      let {\n        nextElected,\n        validators\n      } = _ref;\n      return api.derive.staking.queryMulti(combineAccounts(nextElected, validators), flags).pipe(map(info => ({\n        info,\n        nextElected,\n        validators\n      })));\n    }));\n  });\n}","map":{"version":3,"names":["map","switchMap","arrayFlatten","memo","DEFAULT_FLAGS","withController","withExposure","withPrefs","combineAccounts","nextElected","validators","filter","v","find","n","eq","electedInfo","instanceId","api","flags","arguments","length","undefined","derive","staking","pipe","_ref","queryMulti","info"],"sources":["/home/ryoitsu/Documents/test/react-todo-app/node_modules/@polkadot/api-derive/staking/electedInfo.js"],"sourcesContent":["import { map, switchMap } from 'rxjs';\nimport { arrayFlatten } from '@polkadot/util';\nimport { memo } from '../util/index.js';\nconst DEFAULT_FLAGS = { withController: true, withExposure: true, withPrefs: true };\nfunction combineAccounts(nextElected, validators) {\n    return arrayFlatten([nextElected, validators.filter((v) => !nextElected.find((n) => n.eq(v)))]);\n}\nexport function electedInfo(instanceId, api) {\n    return memo(instanceId, (flags = DEFAULT_FLAGS) => api.derive.staking.validators().pipe(switchMap(({ nextElected, validators }) => api.derive.staking.queryMulti(combineAccounts(nextElected, validators), flags).pipe(map((info) => ({\n        info,\n        nextElected,\n        validators\n    }))))));\n}\n"],"mappings":"AAAA,SAASA,GAAG,EAAEC,SAAS,QAAQ,MAAM;AACrC,SAASC,YAAY,QAAQ,gBAAgB;AAC7C,SAASC,IAAI,QAAQ,kBAAkB;AACvC,MAAMC,aAAa,GAAG;EAAEC,cAAc,EAAE,IAAI;EAAEC,YAAY,EAAE,IAAI;EAAEC,SAAS,EAAE;AAAK,CAAC;AACnF,SAASC,eAAeA,CAACC,WAAW,EAAEC,UAAU,EAAE;EAC9C,OAAOR,YAAY,CAAC,CAACO,WAAW,EAAEC,UAAU,CAACC,MAAM,CAAEC,CAAC,IAAK,CAACH,WAAW,CAACI,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACC,EAAE,CAACH,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACnG;AACA,OAAO,SAASI,WAAWA,CAACC,UAAU,EAAEC,GAAG,EAAE;EACzC,OAAOf,IAAI,CAACc,UAAU,EAAE;IAAA,IAACE,KAAK,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGhB,aAAa;IAAA,OAAKc,GAAG,CAACK,MAAM,CAACC,OAAO,CAACd,UAAU,CAAC,CAAC,CAACe,IAAI,CAACxB,SAAS,CAACyB,IAAA;MAAA,IAAC;QAAEjB,WAAW;QAAEC;MAAW,CAAC,GAAAgB,IAAA;MAAA,OAAKR,GAAG,CAACK,MAAM,CAACC,OAAO,CAACG,UAAU,CAACnB,eAAe,CAACC,WAAW,EAAEC,UAAU,CAAC,EAAES,KAAK,CAAC,CAACM,IAAI,CAACzB,GAAG,CAAE4B,IAAI,KAAM;QAClOA,IAAI;QACJnB,WAAW;QACXC;MACJ,CAAC,CAAC,CAAC,CAAC;IAAA,EAAC,CAAC;EAAA,EAAC;AACX","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}