{"ast":null,"code":"import { map, of } from 'rxjs';\nimport { memo } from '../util/index.js';\nimport { getEraCache, setEraCache } from './cache.js';\nimport { combineEras, erasHistoricApply, singleEra } from './util.js';\nconst CACHE_KEY = 'eraPrefs';\nfunction mapPrefs(era, all) {\n  const validators = {};\n  all.forEach(([key, prefs]) => {\n    validators[key.args[1].toString()] = prefs;\n  });\n  return {\n    era,\n    validators\n  };\n}\nexport function _eraPrefs(instanceId, api) {\n  return memo(instanceId, (era, withActive) => {\n    const [cacheKey, cached] = getEraCache(CACHE_KEY, era, withActive);\n    return cached ? of(cached) : api.query.staking.erasValidatorPrefs.entries(era).pipe(map(r => setEraCache(cacheKey, withActive, mapPrefs(era, r))));\n  });\n}\nexport const eraPrefs = /*#__PURE__*/singleEra('_eraPrefs');\nexport const _erasPrefs = /*#__PURE__*/combineEras('_eraPrefs');\nexport const erasPrefs = /*#__PURE__*/erasHistoricApply('_erasPrefs');","map":{"version":3,"names":["map","of","memo","getEraCache","setEraCache","combineEras","erasHistoricApply","singleEra","CACHE_KEY","mapPrefs","era","all","validators","forEach","key","prefs","args","toString","_eraPrefs","instanceId","api","withActive","cacheKey","cached","query","staking","erasValidatorPrefs","entries","pipe","r","eraPrefs","_erasPrefs","erasPrefs"],"sources":["/home/ryoitsu/Documents/test/react-todo-app/node_modules/@polkadot/api-derive/staking/erasPrefs.js"],"sourcesContent":["import { map, of } from 'rxjs';\nimport { memo } from '../util/index.js';\nimport { getEraCache, setEraCache } from './cache.js';\nimport { combineEras, erasHistoricApply, singleEra } from './util.js';\nconst CACHE_KEY = 'eraPrefs';\nfunction mapPrefs(era, all) {\n    const validators = {};\n    all.forEach(([key, prefs]) => {\n        validators[key.args[1].toString()] = prefs;\n    });\n    return { era, validators };\n}\nexport function _eraPrefs(instanceId, api) {\n    return memo(instanceId, (era, withActive) => {\n        const [cacheKey, cached] = getEraCache(CACHE_KEY, era, withActive);\n        return cached\n            ? of(cached)\n            : api.query.staking.erasValidatorPrefs.entries(era).pipe(map((r) => setEraCache(cacheKey, withActive, mapPrefs(era, r))));\n    });\n}\nexport const eraPrefs = /*#__PURE__*/ singleEra('_eraPrefs');\nexport const _erasPrefs = /*#__PURE__*/ combineEras('_eraPrefs');\nexport const erasPrefs = /*#__PURE__*/ erasHistoricApply('_erasPrefs');\n"],"mappings":"AAAA,SAASA,GAAG,EAAEC,EAAE,QAAQ,MAAM;AAC9B,SAASC,IAAI,QAAQ,kBAAkB;AACvC,SAASC,WAAW,EAAEC,WAAW,QAAQ,YAAY;AACrD,SAASC,WAAW,EAAEC,iBAAiB,EAAEC,SAAS,QAAQ,WAAW;AACrE,MAAMC,SAAS,GAAG,UAAU;AAC5B,SAASC,QAAQA,CAACC,GAAG,EAAEC,GAAG,EAAE;EACxB,MAAMC,UAAU,GAAG,CAAC,CAAC;EACrBD,GAAG,CAACE,OAAO,CAAC,CAAC,CAACC,GAAG,EAAEC,KAAK,CAAC,KAAK;IAC1BH,UAAU,CAACE,GAAG,CAACE,IAAI,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAC,GAAGF,KAAK;EAC9C,CAAC,CAAC;EACF,OAAO;IAAEL,GAAG;IAAEE;EAAW,CAAC;AAC9B;AACA,OAAO,SAASM,SAASA,CAACC,UAAU,EAAEC,GAAG,EAAE;EACvC,OAAOlB,IAAI,CAACiB,UAAU,EAAE,CAACT,GAAG,EAAEW,UAAU,KAAK;IACzC,MAAM,CAACC,QAAQ,EAAEC,MAAM,CAAC,GAAGpB,WAAW,CAACK,SAAS,EAAEE,GAAG,EAAEW,UAAU,CAAC;IAClE,OAAOE,MAAM,GACPtB,EAAE,CAACsB,MAAM,CAAC,GACVH,GAAG,CAACI,KAAK,CAACC,OAAO,CAACC,kBAAkB,CAACC,OAAO,CAACjB,GAAG,CAAC,CAACkB,IAAI,CAAC5B,GAAG,CAAE6B,CAAC,IAAKzB,WAAW,CAACkB,QAAQ,EAAED,UAAU,EAAEZ,QAAQ,CAACC,GAAG,EAAEmB,CAAC,CAAC,CAAC,CAAC,CAAC;EACjI,CAAC,CAAC;AACN;AACA,OAAO,MAAMC,QAAQ,GAAG,aAAcvB,SAAS,CAAC,WAAW,CAAC;AAC5D,OAAO,MAAMwB,UAAU,GAAG,aAAc1B,WAAW,CAAC,WAAW,CAAC;AAChE,OAAO,MAAM2B,SAAS,GAAG,aAAc1B,iBAAiB,CAAC,YAAY,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}